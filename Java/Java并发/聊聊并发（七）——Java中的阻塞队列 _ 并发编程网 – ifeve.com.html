<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!-- saved from url=(0037)http://ifeve.com/java-blocking-queue/ -->
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script async="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-9394337417063147",
          enable_page_level_ads: true
     });
</script>
<!--<base target="_blank">--><base href="." target="_blank">
<meta name="baidu_union_verify" content="d30f7acd6a9a378cc0aeb0bd0ddfe30d">

<script async="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9394337417063147",
    enable_page_level_ads: true
  });
</script>
<title>聊聊并发（七）——Java中的阻塞队列 | 并发编程网 – ifeve.com</title>
<meta name="description" content="让天下没有难学的技术">

<link rel="alternate" type="application/rss+xml" title="并发编程网 – ifeve.com RSS Feed" href="http://ifeve.com/feed/">
<link rel="alternate" type="application/atom+xml" title="并发编程网 – ifeve.com Atom Feed" href="http://ifeve.com/feed/atom/"> 
<link rel="pingback" href="http://ifeve.com/xmlrpc.php">

<link rel="stylesheet" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/style.css" type="text/css">
<link rel="stylesheet" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/comment-style.css" type="text/css">

 
<link rel="dns-prefetch" href="http://ajax.googleapis.com/">
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="并发编程网 - ifeve.com » 聊聊并发（七）——Java中的阻塞队列评论Feed" href="http://ifeve.com/java-blocking-queue/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/ifeve.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.0"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/wp-emoji-release.min.js" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="wpfp-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/wpfp.css" type="text/css">
<link rel="stylesheet" id="yarppWidgetCss-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/widget.css" type="text/css" media="all">
<link rel="stylesheet" id="jquery-ui-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/jquery-ui.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="dwqa-style-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/style(1).css" type="text/css" media="all">
<link rel="stylesheet" id="dwqa-rtl-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rtl.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-postratings-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/postratings-css.css" type="text/css" media="all">
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/jquery.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/jquery-migrate.min.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/wpfp.js"></script>
<link rel="https://api.w.org/" href="http://ifeve.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://ifeve.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://ifeve.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="基于锁的原子操作" href="http://ifeve.com/inter-64-ia-32-8-1/">
<link rel="next" title="ReentrantLock(重入锁)以及公平性" href="http://ifeve.com/reentrantlock-and-fairness/">
<meta name="generator" content="WordPress 5.0">
<link rel="canonical" href="http://ifeve.com/java-blocking-queue/">
<link rel="shortlink" href="http://ifeve.com/?p=8396">
<link rel="alternate" type="application/json+oembed" href="http://ifeve.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fifeve.com%2Fjava-blocking-queue%2F">
<link rel="alternate" type="text/xml+oembed" href="http://ifeve.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fifeve.com%2Fjava-blocking-queue%2F&amp;format=xml">

<!-- StarBox - the Author Box for Humans 3.0.6, visit: http://wordpress.org/plugins/starbox/ -->
<!-- /StarBox - the Author Box for Humans -->

<link rel="stylesheet" id="frontend.css-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/frontend.css" type="text/css" media="all">
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/frontend.js"></script>
<link rel="stylesheet" id="hidedefault.css-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/hidedefault.css" type="text/css" media="all">
<link rel="amphtml" href="http://ifeve.com/java-blocking-queue/amp/"><link rel="stylesheet" type="text/css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/shCore.css"><link rel="stylesheet" type="text/css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/shThemeEclipse.css"><style type="text/css" id="syntaxhighlighteranchor"></style>

<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/jscript.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/comment.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rollover.js"></script>

<!--[if IE 7]>
<link rel="stylesheet" href="http://ifeve.com/wp-content/themes/flat/ie7.css" type="text/css" />
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" href="http://ifeve.com/wp-content/themes/flat/ie8.css" type="text/css" />
<![endif]-->


<style type="text/css">
a, .post .title a:hover, .post_meta a:hover, #bread_crumb ul li a:hover, #previous_post a:hover, #next_post a:hover, .post a.more-link:hover, #right_col li a:hover, #copyright li a:hover, #archive_headline #keyword,
   #comments_wrapper a:hover, #comment_header_right .comment_switch_active a, #comment_header_right .comment_switch_active a:hover, #comment_pager .current
   { color:#00A19E; }

#no_post a.back:hover, #wp-calendar td a:hover, #wp-calendar #prev a:hover, #wp-calendar #next a:hover, .page_navi a:hover, #submit_comment:hover
 { background-color:#00A19E; }

#guest_info input:focus, #comment_textarea textarea:focus
 { border:1px solid #00A19E; }

a:hover
 { color:#BDC900; }

body { font-size:14px; }

#header { background:url(http://ifeve.com/wp-content/uploads/flat/bg.png) left top; }
.logo_text a { color:#F5F5F5; }
#site_description {  border-top:1px solid #BBBBBB; color:#D2D9CC; }


</style>

</head>

<body>

 <div id="header">
  <div class="header_menu">
    <ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95" class="menu"><li id="menu-item-16594" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-16594"><a href="http://ifeve.com/">首页</a></li>
<li id="menu-item-3432" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3432"><a href="http://ifeve.com/wp-login.php">登录</a></li>
<li id="menu-item-9219" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-9219 parent_menu"><a href="http://ifeve.com/category/java/">JAVA</a>
<ul class="sub-menu">
	<li id="menu-item-16108" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-16108"><a href="http://ifeve.com/java-io/">Java IO 教程</a></li>
	<li id="menu-item-5283" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5283"><a href="http://ifeve.com/java-nio-all/">Java NIO 教程</a></li>
	<li id="menu-item-17514" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17514"><a href="http://ifeve.com/java-reflection/">JAVA Reflection教程</a></li>
	<li id="menu-item-16239" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-16239"><a href="http://ifeve.com/java-network">Java 网络教程</a></li>
	<li id="menu-item-4416" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4416"><a href="http://ifeve.com/java-concurrency-thread-directory/">Java并发和多线程</a></li>
	<li id="menu-item-2767" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2767"><a href="http://ifeve.com/jmm-cookbook/">Java内存模型指南</a></li>
	<li id="menu-item-2747" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2747"><a href="http://ifeve.com/jmm-faq/">Java内存模型FAQ</a></li>
	<li id="menu-item-2765" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2765"><a href="http://ifeve.com/syn-jmm/">同步与Java内存模型</a></li>
	<li id="menu-item-5789" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5789"><a href="http://ifeve.com/oracle-java-concurrency-tutorial/">Oracle官方并发教程</a></li>
	<li id="menu-item-15316" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15316"><a href="http://ifeve.com/jvm-optimize/">JVM性能优化系列</a></li>
	<li id="menu-item-15313" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15313"><a href="http://ifeve.com/useful-jvm-flags/">JVM实用参数系列</a></li>
</ul>
</li>
<li id="menu-item-7938" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7938"><a href="http://ifeve.com/category/c/">C++</a></li>
<li id="menu-item-9220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-9220 parent_menu"><a href="http://ifeve.com/category/framework/">Framework</a>
<ul class="sub-menu">
	<li id="menu-item-12798" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12798"><a href="http://ifeve.com/disruptor/">Disruptor 框架指南</a></li>
	<li id="menu-item-12783" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-12783"><a title="Netty" href="http://ifeve.com/category/netty/">Netty</a></li>
	<li id="menu-item-12791" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-12791"><a href="http://ifeve.com/category/scala/">Scala</a></li>
	<li id="menu-item-12312" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12312"><a href="http://ifeve.com/getting-started-with-stom-index/">Storm 入门</a></li>
	<li id="menu-item-9218" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9218"><a href="http://ifeve.com/google-guava/">Guava 官方指南</a></li>
	<li id="menu-item-20471" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-20471"><a href="http://ifeve.com/velocity-guide/">Apache Velocity 官方指南</a></li>
	<li id="menu-item-21439" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-21439"><a href="http://ifeve.com/storm-translation/">Apache Storm 官方文档</a></li>
</ul>
</li>
<li id="menu-item-555" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-555 parent_menu"><a href="http://ifeve.com/category/concurrency-translation/">其他译文</a>
<ul class="sub-menu">
	<li id="menu-item-2777" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2777"><a href="http://ifeve.com/java-concurrent/">并发基础</a></li>
	<li id="menu-item-3340" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3340"><a href="http://ifeve.com/aqs/">j.u.c同步框架</a></li>
	<li id="menu-item-2769" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2769"><a href="http://ifeve.com/fj/">Fork Join框架</a></li>
	<li id="menu-item-9221" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9221"><a href="http://ifeve.com/doug-lea/">Doug Lea 论文</a></li>
	<li id="menu-item-4643" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4643"><a href="http://ifeve.com/mechanical-sympathy/">Mechanical Sympathy</a></li>
	<li id="menu-item-6397" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6397"><a href="http://ifeve.com/stm/">软件事务内存导论</a></li>
	<li id="menu-item-10845" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10845"><a href="http://ifeve.com/jsr133-cn/">JSR133中文版</a></li>
</ul>
</li>
<li id="menu-item-103" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-103 parent_menu"><a href="http://ifeve.com/category/talk-concurrent/">本站原创</a>
<ul class="sub-menu">
	<li id="menu-item-2763" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2763"><a href="http://ifeve.com/talk-concurrency/">聊聊并发</a></li>
	<li id="menu-item-2753" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2753"><a href="http://ifeve.com/java-memory-model-0/">深入理解Java内存模型</a></li>
	<li id="menu-item-4862" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4862"><a href="http://ifeve.com/from-javaeye-sys-struct/">从Java视角理解系统结构</a></li>
	<li id="menu-item-4627" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4627"><a href="http://ifeve.com/ali-itu-agile/">阿里内贸团队敏捷实践</a></li>
</ul>
</li>
<li id="menu-item-7119" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-7119 parent_menu"><a href="http://ifeve.com/category/%e5%b9%b6%e5%8f%91%e4%b9%a6%e7%b1%8d/">并发书籍</a>
<ul class="sub-menu">
	<li id="menu-item-10846" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10846"><a href="http://ifeve.com/art-of-java-concurrent-program/">《Java 并发编程的艺术》迷你书</a></li>
	<li id="menu-item-6042" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6042"><a href="http://ifeve.com/perfbook/">《深入理解并行编程》</a></li>
	<li id="menu-item-9172" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9172"><a href="http://ifeve.com/c-plus-plus-concurrency-in-action/">《C++ 并发编程》</a></li>
	<li id="menu-item-7785" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7785"><a href="http://ifeve.com/java-7-concurrency-cookbook/">《Java 7 并发编程指南》</a></li>
	<li id="menu-item-7120" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7120"><a href="http://ifeve.com/jvm-concurrency">《Java 虚拟机并发编程》</a></li>
	<li id="menu-item-12360" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12360"><a href="http://ifeve.com/getting-started-with-stom-index/">《Storm入门》中文版</a></li>
</ul>
</li>
<li id="menu-item-17079" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17079"><a href="http://ifeve.com/questions/">面试题</a></li>
<li id="menu-item-22180" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-22180"><a href="http://ifeve.com/my-favorite/">我的收藏</a></li>
<li id="menu-item-9171" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-9171 parent_menu"><a href="http://ifeve.com/need-you/">加入我们</a>
<ul class="sub-menu" style="display: none;">
	<li id="menu-item-3246" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3246"><a href="http://ifeve.com/contribute/">我要投稿</a></li>
	<li id="menu-item-6854" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6854"><a href="http://ifeve.com/neitui/">内推阿里</a></li>
</ul>
</li>
<li id="menu-item-105" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-105 parent_menu"><a href="http://ifeve.com/about-site/">关于本站</a>
<ul class="sub-menu" style="display: none;">
	<li id="menu-item-11306" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-11306"><a href="http://ifeve.com/category/%e6%b4%bb%e5%8a%a8/">活动</a></li>
	<li id="menu-item-1487" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1487"><a href="http://ifeve.com/sitemap.html">文章归档</a></li>
	<li id="menu-item-29361" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-29361"><a href="http://ifeve.com/author/">本站作者</a></li>
	<li id="menu-item-131" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-131"><a href="http://ifeve.com/about-site/about-me/">关于清英</a></li>
	<li id="menu-item-7600" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7600"><a href="http://ifeve.com/ads/">广告合作</a></li>
</ul>
</li>
</ul>    </div>
  <!-- logo -->
  <h1 class="logo_text"><a href="http://ifeve.com/">并发编程网 - ifeve.com</a></h1>
<h2 id="site_description">让天下没有难学的技术</h2>
 </div>

 <div id="main_content" class="clearfix">

  <div id="left_col">
      <div id="bread_crumb">
    <ul class="clearfix">
     <li id="bc_home"><a href="http://ifeve.com/" title="首页">首页</a></li>
     <li id="bc_cat"><a href="http://ifeve.com/category/java/">JAVA</a></li>     <li class="last">聊聊并发（七）——Java中的阻塞队列</li>
    </ul>
   </div>
   
   
   <div class="post_wrap clearfix" id="single">
    <div class="post">
     <h3 class="title"><span>聊聊并发（七）——Java中的阻塞队列</span></h3>
     <div class="post_content">
      <p>原文首发于<a href="http://www.infoq.com/cn/articles/java-blocking-queue" target="_blank">InfoQ</a></p>
<h2>1. 什么是阻塞队列？</h2>
<p>阻塞队列（BlockingQueue）是一个支持两个附加操作的队列。这两个附加的操作是：在队列为空时，获取元素的线程会等待队列变为非空。当队列满时，存储元素的线程会等待队列可用。阻塞队列常用于生产者和消费者的场景，生产者是往队列里添加元素的线程，消费者是从队列里拿元素的线程。阻塞队列就是生产者存放元素的容器，而消费者也只从容器里拿元素。<br>
<span id="more-8396"></span></p>
<p>阻塞队列提供了四种处理方法:</p>
<table border="1px" cellspacing="0">
<tbody>
<tr bgcolor="#4f81bc">
<th>方法\处理方式</th>
<th>抛出异常</th>
<th>返回特殊值</th>
<th>一直阻塞</th>
<th>超时退出</th>
</tr>
<tr>
<td>插入方法</td>
<td>add(e)</td>
<td>offer(e)</td>
<td>put(e)</td>
<td>offer(e,time,unit)</td>
</tr>
<tr>
<td>移除方法</td>
<td>remove()</td>
<td>poll()</td>
<td>take()</td>
<td>poll(time,unit)</td>
</tr>
<tr>
<td>检查方法</td>
<td>element()</td>
<td>peek()</td>
<td>不可用</td>
<td>不可用</td>
</tr>
</tbody>
</table>
<ul>
<li>抛出异常：是指当阻塞队列满时候，再往队列里插入元素，会抛出IllegalStateException(“Queue full”)异常。当队列为空时，从队列里获取元素时会抛出NoSuchElementException异常 。</li>
<li>返回特殊值：插入方法会返回是否成功，成功则返回true。移除方法，则是从队列里拿出一个元素，如果没有则返回null</li>
<li>一直阻塞：当阻塞队列满时，如果生产者线程往队列里put元素，队列会一直阻塞生产者线程，直到拿到数据，或者响应中断退出。当队列空时，消费者线程试图从队列里take元素，队列也会阻塞消费者线程，直到队列可用。</li>
<li>超时退出：当阻塞队列满时，队列会阻塞生产者线程一段时间，如果超过一定的时间，生产者线程就会退出。</li>
</ul>
<h2>2. Java里的阻塞队列</h2>
<p>JDK7提供了7个阻塞队列。分别是</p>
<ul>
<li>ArrayBlockingQueue ：一个由数组结构组成的有界阻塞队列。</li>
<li>LinkedBlockingQueue ：一个由链表结构组成的有界阻塞队列。</li>
<li>PriorityBlockingQueue ：一个支持优先级排序的无界阻塞队列。</li>
<li>DelayQueue：一个使用优先级队列实现的无界阻塞队列。</li>
<li>SynchronousQueue：一个不存储元素的阻塞队列。</li>
<li>LinkedTransferQueue：一个由链表结构组成的无界阻塞队列。</li>
<li>LinkedBlockingDeque：一个由链表结构组成的双向阻塞队列。</li>
</ul>
<h3>ArrayBlockingQueue</h3>
<p>ArrayBlockingQueue是一个用数组实现的有界阻塞队列。此队列按照先进先出（FIFO）的原则对元素进行排序。默认情况下不保证访问者公平的访问队列，所谓公平访问队列是指阻塞的所有生产者线程或消费者线程，当队列可用时，可以按照阻塞的先后顺序访问队列，即先阻塞的生产者线程，可以先往队列里插入元素，先阻塞的消费者线程，可以先从队列里获取元素。通常情况下为了保证公平性会降低吞吐量。我们可以使用以下代码创建一个公平的阻塞队列：</p>
<div id="highlighter_941176" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_941176_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_941176" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">ArrayBlockingQueue fairQueue = </code><code class="keyword">new</code>&nbsp; <code class="plain">ArrayBlockingQueue(</code><code class="value">1000</code><code class="plain">,</code><code class="keyword">true</code><code class="plain">);</code></td></tr></tbody></table></div></div></div>
<p>访问者的公平性是使用可重入锁实现的，代码如下：</p>
<div id="highlighter_953942" class="syntaxhighlighter  "><div class="bar     "><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_953942_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_953942" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="plain">ArrayBlockingQueue(</code><code class="keyword">int</code> <code class="plain">capacity, </code><code class="keyword">boolean</code> <code class="plain">fair) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(capacity &lt;= </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">throw</code> <code class="keyword">new</code> <code class="plain">IllegalArgumentException();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.items = </code><code class="keyword">new</code> <code class="plain">Object[capacity];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">lock = </code><code class="keyword">new</code> <code class="plain">ReentrantLock(fair);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notEmpty = lock.newCondition();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notFull =&nbsp; lock.newCondition();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<h3>LinkedBlockingQueue</h3>
<p>LinkedBlockingQueue是一个用链表实现的有界阻塞队列。此队列的默认和最大长度为Integer.MAX_VALUE。此队列按照先进先出的原则对元素进行排序。</p>
<h3>PriorityBlockingQueue</h3>
<p>PriorityBlockingQueue是一个支持优先级的无界队列。默认情况下元素采取自然顺序排列，也可以通过比较器comparator来指定元素的排序规则。元素按照升序排列。</p>
<h3>DelayQueue</h3>
<p>DelayQueue是一个支持延时获取元素的无界阻塞队列。队列使用PriorityQueue来实现。队列中的元素必须实现Delayed接口，在创建元素时可以指定多久才能从队列中获取当前元素。只有在延迟期满时才能从队列中提取元素。我们可以将DelayQueue运用在以下应用场景：</p>
<ul>
<li>缓存系统的设计：可以用DelayQueue保存缓存元素的有效期，使用一个线程循环查询DelayQueue，一旦能从DelayQueue中获取元素时，表示缓存有效期到了。</li>
<li>定时任务调度。使用DelayQueue保存当天将会执行的任务和执行时间，一旦从DelayQueue中获取到任务就开始执行，从比如TimerQueue就是使用DelayQueue实现的。</li>
</ul>
<p>队列中的Delayed必须实现compareTo来指定元素的顺序。比如让延时时间最长的放在队列的末尾。实现代码如下：</p>
<div id="highlighter_311965" class="syntaxhighlighter  "><div class="bar       "><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_311965_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_311965" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">int</code> <code class="plain">compareTo(Delayed other) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(other == </code><code class="keyword">this</code><code class="plain">) </code><code class="comments">// compare zero ONLY if same object</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="value">0</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(other </code><code class="keyword">instanceof</code> <code class="plain">ScheduledFutureTask) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ScheduledFutureTask x = (ScheduledFutureTask)other;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">long</code> <code class="plain">diff = time - x.time;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(diff &lt; </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">-</code><code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code> <code class="keyword">if</code> <code class="plain">(diff &gt; </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code> <code class="keyword">if</code> <code class="plain">(sequenceNumber &lt; x.sequenceNumber)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">-</code><code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">long</code> <code class="plain">d = (getDelay(TimeUnit.NANOSECONDS) -</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">other.getDelay(TimeUnit.NANOSECONDS));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">(d == </code><code class="value">0</code><code class="plain">) ? </code><code class="value">0</code> <code class="plain">: ((d &lt; </code><code class="value">0</code><code class="plain">) ? -</code><code class="value">1</code> <code class="plain">: </code><code class="value">1</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p><b>如何实现Delayed接口</b></p>
<p>我们可以参考ScheduledThreadPoolExecutor里ScheduledFutureTask类。这个类实现了Delayed接口。首先：在对象创建的时候，使用time记录前对象什么时候可以使用，代码如下：</p>
<div id="highlighter_896058" class="syntaxhighlighter  "><div class="bar    "><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_896058_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_896058" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">ScheduledFutureTask(Runnable r, V result, </code><code class="keyword">long</code> <code class="plain">ns, </code><code class="keyword">long</code> <code class="plain">period) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">super</code><code class="plain">(r, result);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.time = ns;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.period = period;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.sequenceNumber = sequencer.getAndIncrement();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>然后使用getDelay可以查询当前元素还需要延时多久，代码如下：</p>
<pre>public long getDelay(TimeUnit unit) {
            return unit.convert(time - now(), TimeUnit.NANOSECONDS);
        }</pre>
<p>通过构造函数可以看出延迟时间参数ns的单位是纳秒，自己设计的时候最好使用纳秒，因为getDelay时可以指定任意单位，一旦以纳秒作为单位，而延时的时间又精确不到纳秒就麻烦了。使用时请注意当time小于当前时间时，getDelay会返回负数。</p>
<p><b>如何实现延时队列</b></p>
<p>延时队列的实现很简单，当消费者从队列里获取元素时，如果元素没有达到延时时间，就阻塞当前线程。</p>
<div id="highlighter_502810" class="syntaxhighlighter  "><div class="bar     "><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_502810_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_502810" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">long</code> <code class="plain">delay = first.getDelay(TimeUnit.NANOSECONDS);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(delay &lt;= </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">q.poll();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code> <code class="keyword">if</code> <code class="plain">(leader != </code><code class="keyword">null</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">available.await();</code></td></tr></tbody></table></div></div></div>
<h3>SynchronousQueue</h3>
<p>SynchronousQueue是一个不存储元素的阻塞队列。每一个put操作必须等待一个take操作，否则不能继续添加元素。SynchronousQueue可以看成是一个传球手，负责把生产者线程处理的数据直接传递给消费者线程。队列本身并不存储任何元素，非常适合于传递性场景,比如在一个线程中使用的数据，传递给另外一个线程使用，SynchronousQueue的吞吐量高于LinkedBlockingQueue 和 ArrayBlockingQueue。</p>
<h3>LinkedTransferQueue</h3>
<p>LinkedTransferQueue是一个由链表结构组成的无界阻塞TransferQueue队列。相对于其他阻塞队列LinkedTransferQueue多了tryTransfer和transfer方法。</p>
<p><strong>transfer方法</strong>。如果当前有消费者正在等待接收元素（消费者使用take()方法或带时间限制的poll()方法时），transfer方法可以把生产者传入的元素立刻transfer（传输）给消费者。如果没有消费者在等待接收元素，transfer方法会将元素存放在队列的tail节点，并等到该元素被消费者消费了才返回。transfer方法的关键代码如下：</p>
<div id="highlighter_952012" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_952012_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_952012" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">Node pred = tryAppend(s, haveData);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">return</code> <code class="plain">awaitMatch(s, pred, e, (how == TIMED), nanos);</code></td></tr></tbody></table></div></div></div>
<p>第一行代码是试图把存放当前元素的s节点作为tail节点。第二行代码是让CPU自旋等待消费者消费元素。因为自旋会消耗CPU，所以自旋一定的次数后使用Thread.yield()方法来暂停当前正在执行的线程，并执行其他线程。</p>
<p><strong>tryTransfer方法</strong>。则是用来试探下生产者传入的元素是否能直接传给消费者。如果没有消费者等待接收元素，则返回false。和transfer方法的区别是tryTransfer方法无论消费者是否接收，方法立即返回。而transfer方法是必须等到消费者消费了才返回。</p>
<p>对于带有时间限制的tryTransfer(E e, long timeout, TimeUnit unit)方法，则是试图把生产者传入的元素直接传给消费者，但是如果没有消费者消费该元素则等待指定的时间再返回，如果超时还没消费元素，则返回false，如果在超时时间内消费了元素，则返回true。</p>
<h3>LinkedBlockingDeque</h3>
<p>LinkedBlockingDeque是一个由链表结构组成的双向阻塞队列。所谓双向队列指的你可以从队列的两端插入和移出元素。双端队列因为多了一个操作队列的入口，在多线程同时入队时，也就减少了一半的竞争。相比其他的阻塞队列，LinkedBlockingDeque多了addFirst，addLast，offerFirst，offerLast，peekFirst，peekLast等方法，以First单词结尾的方法，表示插入，获取（peek）或移除双端队列的第一个元素。以Last单词结尾的方法，表示插入，获取或移除双端队列的最后一个元素。另外插入方法add等同于addLast，移除方法remove等效于removeFirst。但是take方法却等同于takeFirst，不知道是不是Jdk的bug，使用时还是用带有First和Last后缀的方法更清楚。在初始化LinkedBlockingDeque时可以初始化队列的容量，用来防止其再扩容时过渡膨胀。另外双向阻塞队列可以运用在“工作窃取”模式中。</p>
<h2>3. 阻塞队列的实现原理</h2>
<p>如果队列是空的，消费者会一直等待，当生产者添加元素时候，消费者是如何知道当前队列有元素的呢？如果让你来设计阻塞队列你会如何设计，让生产者和消费者能够高效率的进行通讯呢？让我们先来看看JDK是如何实现的。</p>
<p>使用通知模式实现。所谓通知模式，就是当生产者往满的队列里添加元素时会阻塞住生产者，当消费者消费了一个队列中的元素后，会通知生产者当前队列可用。通过查看JDK源码发现ArrayBlockingQueue使用了Condition来实现，代码如下：</p>
<div id="highlighter_785387" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_785387_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_785387" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">final</code> <code class="plain">Condition notFull;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">final</code> <code class="plain">Condition notEmpty;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="keyword">public</code> <code class="plain">ArrayBlockingQueue(</code><code class="keyword">int</code> <code class="plain">capacity, </code><code class="keyword">boolean</code> <code class="plain">fair) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//省略其他代码</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notEmpty = lock.newCondition();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notFull =&nbsp; lock.newCondition();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">put(E e) </code><code class="keyword">throws</code> <code class="plain">InterruptedException {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">checkNotNull(e);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">final</code> <code class="plain">ReentrantLock lock = </code><code class="keyword">this</code><code class="plain">.lock;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">lock.lockInterruptibly();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code> <code class="plain">(count == items.length)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notFull.await();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">insert(e);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">finally</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">lock.unlock();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="keyword">public</code> <code class="plain">E take() </code><code class="keyword">throws</code> <code class="plain">InterruptedException {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">final</code> <code class="plain">ReentrantLock lock = </code><code class="keyword">this</code><code class="plain">.lock;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">lock.lockInterruptibly();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code> <code class="plain">(count == </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notEmpty.await();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">extract();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">finally</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">lock.unlock();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">void</code> <code class="plain">insert(E x) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">items[putIndex] = x;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">putIndex = inc(putIndex);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">++count;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">notEmpty.signal();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>当我们往队列里插入一个元素时，如果队列不可用，阻塞生产者主要通过LockSupport.park(this);来实现</p>
<div id="highlighter_540892" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_540892_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_540892" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">final</code> <code class="keyword">void</code> <code class="plain">await() </code><code class="keyword">throws</code> <code class="plain">InterruptedException {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(Thread.interrupted())</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">throw</code> <code class="keyword">new</code> <code class="plain">InterruptedException();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Node node = addConditionWaiter();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">savedState = fullyRelease(node);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code> <code class="plain">interruptMode = </code><code class="value">0</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code> <code class="plain">(!isOnSyncQueue(node)) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LockSupport.park(</code><code class="keyword">this</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">((interruptMode = checkInterruptWhileWaiting(node)) != </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">break</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">interruptMode = REINTERRUPT;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(node.nextWaiter != </code><code class="keyword">null</code><code class="plain">) </code><code class="comments">// clean up if cancelled</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">unlinkCancelledWaiters();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(interruptMode != </code><code class="value">0</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">reportInterruptAfterWait(interruptMode);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>继续进入源码，发现调用setBlocker先保存下将要阻塞的线程，然后调用unsafe.park阻塞当前线程。</p>
<div id="highlighter_280744" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_280744_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_280744" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">static</code> <code class="keyword">void</code> <code class="plain">park(Object blocker) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Thread t = Thread.currentThread();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">setBlocker(t, blocker);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">unsafe.park(</code><code class="keyword">false</code><code class="plain">, 0L);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">setBlocker(t, </code><code class="keyword">null</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>unsafe.park是个native方法，代码如下：</p>
<div id="highlighter_325122" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_325122_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_325122" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">native</code> <code class="keyword">void</code> <code class="plain">park(</code><code class="keyword">boolean</code> <code class="plain">isAbsolute, </code><code class="keyword">long</code> <code class="plain">time);</code></td></tr></tbody></table></div></div></div>
<p>park这个方法会阻塞当前线程，只有以下四种情况中的一种发生时，该方法才会返回。</p>
<ul>
<li>与park对应的unpark执行或已经执行时。注意：已经执行是指unpark先执行，然后再执行的park。</li>
<li>线程被中断时。</li>
<li>如果参数中的time不是零，等待了指定的毫秒数时。</li>
<li>发生异常现象时。这些异常事先无法确定。</li>
</ul>
<p>我们继续看一下JVM是如何实现park方法的，park在不同的操作系统使用不同的方式实现，在linux下是使用的是系统方法pthread_cond_wait实现。实现代码在JVM源码路径src/os/linux/vm/os_linux.cpp里的 os::PlatformEvent::park方法，代码如下：</p>
<div id="highlighter_495011" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_495011_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_495011" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword bold">void</code> <code class="plain">os::PlatformEvent::park() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">v ;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">for</code> <code class="plain">(;;) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">v = _Event ;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">if</code> <code class="plain">(Atomic::cmpxchg (v-1, &amp;_Event, v) == v) </code><code class="keyword bold">break</code> <code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">guarantee (v &gt;= 0, </code><code class="string">"invariant"</code><code class="plain">) ;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">if</code> <code class="plain">(v == 0) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// Do this the hard way by blocking ...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">status = pthread_mutex_lock(_mutex);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">assert_status(status == 0, status, </code><code class="string">"mutex_lock"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">guarantee (_nParked == 0, </code><code class="string">"invariant"</code><code class="plain">) ;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">++ _nParked ;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">while</code> <code class="plain">(_Event &lt; 0) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">status = pthread_cond_wait(_cond, _mutex);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// for some reason, under 2.7 lwp_cond_wait() may return ETIME ...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// Treat this the same as if the wait was interrupted</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">if</code> <code class="plain">(status == ETIME) { status = EINTR; }</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">assert_status(status == 0 || status == EINTR, status, </code><code class="string">"cond_wait"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">-- _nParked ;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// In theory we could move the ST of 0 into _Event past the unlock(),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// but then we'd need a MEMBAR after the ST.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">_Event = 0 ;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">status = pthread_mutex_unlock(_mutex);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">assert_status(status == 0, status, </code><code class="string">"mutex_unlock"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">guarantee (_Event &gt;= 0, </code><code class="string">"invariant"</code><code class="plain">) ;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>pthread_cond_wait是一个多线程的条件变量函数，cond是condition的缩写，字面意思可以理解为线程在等待一个条件发生，这个条件是一个全局变量。这个方法接收两个参数，一个共享变量_cond，一个互斥量_mutex。而unpark方法在linux下是使用pthread_cond_signal实现的。park 在windows下则是使用WaitForSingleObject实现的。</p>
<p>当队列满时，生产者往阻塞队列里插入一个元素，生产者线程会进入WAITING (parking)状态。我们可以使用jstack dump阻塞的生产者线程看到这点：</p>
<div id="highlighter_392036" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://ifeve.com/java-blocking-queue/#viewSource" title="查看源代码" class="item viewSource" style="width: 16px; height: 16px;">查看源代码</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_392036_clipboard" type="application/x-shockwave-flash" title="复制到剪贴板" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_392036" menu="false" src="http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://ifeve.com/java-blocking-queue/#printSource" title="打印" class="item printSource" style="width: 16px; height: 16px;">打印</a><a href="http://ifeve.com/java-blocking-queue/#about" title="帮助" class="item about" style="width: 16px; height: 16px;">帮助</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">"main" prio=5 tid=0x00007fc83c000000 nid=0x10164e000 waiting on condition [0x000000010164d000]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">java.lang.Thread.State: WAITING (parking)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at sun.misc.Unsafe.park(Native Method)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">- parking to wait for&nbsp; &lt;0x0000000140559fe8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at java.util.concurrent.ArrayBlockingQueue.put(ArrayBlockingQueue.java:324)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at blockingqueue.ArrayBlockingQueueTest.main(ArrayBlockingQueueTest.java:11)</code></td></tr></tbody></table></div></div></div>
<h2>4. 参考资料</h2>
<ul>
<li><a href="http://www.cjsdn.net/doc/jdk60/java/util/concurrent/BlockingQueue.html">JDK6.0阻塞队列API文档</a></li>
<li>JDK1.7源码</li>
<li><a href="http://hg.openjdk.java.net/hsx/hotspot-main/hotspot/file/61b82be3b1ff/src/os/windows/vm/os_windows.cpp">JVM Park的windows实现</a></li>
<li><a href="http://hg.openjdk.java.net/hsx/hotspot-main/hotspot/file/61b82be3b1ff/src/os/linux/vm/os_linux.cpp">JVM Park的linux实现代码</a></li>
<li></li>
</ul>
<div style="margin-top: 15px; font-style: italic">
<p><strong>原创文章，转载请注明：</strong> 转载自<a href="http://ifeve.com/">并发编程网 – ifeve.com</a><strong>本文链接地址:</strong> <a href="http://ifeve.com/java-blocking-queue/">聊聊并发（七）——Java中的阻塞队列</a></p>
</div>
<p><a target="_blank" href="http://www.proxool.cn/"><img src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/cache-ads.png"><br>
</a></p>

                         <div class="abh_box abh_box_down abh_box_fancy"><ul class="abh_tabs"> <li class="abh_about abh_active"><a href="http://ifeve.com/java-blocking-queue/#abh_about">About</a></li> <li class="abh_posts"><a href="http://ifeve.com/java-blocking-queue/#abh_posts">Latest Posts</a></li></ul><div class="abh_tab_content"><section class="vcard abh_about_tab abh_tab" style="display:block"><div class="abh_image"><a href="http://weibo.com/kirals" class="url" target="_blank" title="方 腾飞"><img alt="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/a21e2b8f4893347e62eeca7597f04ebc" srcset="http://1.gravatar.com/avatar/a21e2b8f4893347e62eeca7597f04ebc?s=160&amp;d=mm&amp;r=g 2x" class="avatar avatar-80 photo" height="80" width="80"></a></div><div class="abh_social"> </div><div class="abh_text"><h3 class="fn name"><a href="http://weibo.com/kirals" class="url" target="_blank">方 腾飞</a></h3><div class="abh_job"></div><div class="description note abh_description">花名清英，并发网(ifeve.com)创始人，畅销书《Java并发编程的艺术》作者，蚂蚁金服技术专家。目前工作于支付宝微贷事业部，关注互联网金融，并发编程和敏捷实践。微信公众号aliqinying。</div></div> </section><section class="abh_posts_tab abh_tab"><div class="abh_image"><a href="http://weibo.com/kirals" class="url" target="_blank" title="方 腾飞"><img alt="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/a21e2b8f4893347e62eeca7597f04ebc" srcset="http://1.gravatar.com/avatar/a21e2b8f4893347e62eeca7597f04ebc?s=160&amp;d=mm&amp;r=g 2x" class="avatar avatar-80 photo" height="80" width="80"></a></div><div class="abh_social"> </div><div class="abh_text"><h4>Latest posts by 方 腾飞 <span class="abh_allposts">(<a href="http://ifeve.com/author/admin/">see all</a>)</span></h4><div class="abh_description note"><ul>				<li>					<a href="http://ifeve.com/%e3%80%8ahyperledger-fabric%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b%e4%bb%80%e4%b9%88%e6%98%afhyperledger-fabric/">《Hyperledger Fabric官方文档》什么是Hyperledger Fabric?</a><span> - 2018年12月9日</span>				</li>				<li>					<a href="http://ifeve.com/%e5%ae%9e%e9%99%85%e9%a1%b9%e7%9b%ae%e4%b8%ad%e8%bf%90%e7%94%a8%e8%b4%a3%e4%bb%bb%e9%93%be%e6%a8%a1%e5%bc%8f/">实际项目中运用责任链模式</a><span> - 2018年12月9日</span>				</li>				<li>					<a href="http://ifeve.com/%e4%bb%a3%e7%a0%81%e8%b5%b0%e6%9f%a5%e5%a6%82%e4%bd%95%e4%bf%9d%e8%af%81%e8%bd%af%e4%bb%b6%e8%b4%a8%e9%87%8f/">代码走查如何保证软件质量</a><span> - 2018年12月9日</span>				</li></ul></div></div> </section></div> </div><span class="wpfp-span"><img src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/star.png" alt="Favorite" title="Favorite" class="wpfp-img"><img src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/loading.gif" alt="Loading" title="Loading" class="wpfp-hide wpfp-img"><a class="wpfp-link" href="http://ifeve.com/java-blocking-queue/?wpfpaction=add&amp;postid=8396" title="添加本文到我的收藏" rel="nofollow">添加本文到我的收藏</a></span><div class="yarpp-related">
<h3>Related posts:</h3><ol>
<li><a href="http://ifeve.com/java-synchronized/" rel="bookmark" title="聊聊并发（二）Java SE1.6中的Synchronized">聊聊并发（二）Java SE1.6中的Synchronized </a></li>
<li><a href="http://ifeve.com/juc-linkedblockingqueue/" rel="bookmark" title="JUC LinkedBlockingQueue">JUC LinkedBlockingQueue </a></li>
<li><a href="http://ifeve.com/volatile/" rel="bookmark" title="聊聊并发（一）深入分析Volatile的实现原理">聊聊并发（一）深入分析Volatile的实现原理 </a></li>
<li><a href="http://ifeve.com/producers-and-consumers-mode/" rel="bookmark" title="聊聊并发（十）生产者消费者模式">聊聊并发（十）生产者消费者模式 </a></li>
<li><a href="http://ifeve.com/concurrentlinkedqueue/" rel="bookmark" title="聊聊并发（六）ConcurrentLinkedQueue的实现原理分析">聊聊并发（六）ConcurrentLinkedQueue的实现原理分析 </a></li>
<li><a href="http://ifeve.com/atomic-operation/" rel="bookmark" title="聊聊并发（五）原子操作的实现原理">聊聊并发（五）原子操作的实现原理 </a></li>
<li><a href="http://ifeve.com/concurrenthashmap/" rel="bookmark" title="聊聊并发（四）深入分析ConcurrentHashMap">聊聊并发（四）深入分析ConcurrentHashMap </a></li>
<li><a href="http://ifeve.com/java-threadpool/" rel="bookmark" title="聊聊并发（三）Java线程池的分析和使用">聊聊并发（三）Java线程池的分析和使用 </a></li>
<li><a href="http://ifeve.com/talk-concurrency-forkjoin/" rel="bookmark" title="聊聊并发（八）——Fork/Join框架介绍">聊聊并发（八）——Fork/Join框架介绍 </a></li>
<li><a href="http://ifeve.com/java-copy-on-write/" rel="bookmark" title="聊聊并发-Java中的Copy-On-Write容器">聊聊并发-Java中的Copy-On-Write容器 </a></li>
<li><a href="http://ifeve.com/understand-condition/" rel="bookmark" title="怎么理解Condition">怎么理解Condition </a></li>
<li><a href="http://ifeve.com/java_lock_see3/" rel="bookmark" title="Java锁的种类以及辨析（三）：阻塞锁">Java锁的种类以及辨析（三）：阻塞锁 </a></li>
<li><a href="http://ifeve.com/talk-concurrency/" rel="bookmark" title="聊聊并发系列文章">聊聊并发系列文章 </a></li>
<li><a href="http://ifeve.com/%e3%80%8a-java%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a%e3%80%8b%e7%ac%ac5%e7%ab%a0-%e5%a4%9a%e7%ba%bf%e7%a8%8b%e4%b9%8b%e9%97%b4%e4%ba%a4%e4%ba%92/" rel="bookmark" title="《 Java并发编程从入门到精通》第5章 多线程之间交互：线程阀">《 Java并发编程从入门到精通》第5章 多线程之间交互：线程阀 </a></li>
<li><a href="http://ifeve.com/java%e4%ba%92%e6%96%a5%e9%94%81synchronizedlock%ef%bc%9a%e8%a1%8c%e4%b8%ba%e5%88%86%e6%9e%90%e5%8f%8a%e6%ba%90%e7%a0%81/" rel="bookmark" title="JAVA互斥锁(synchronized&amp;Lock)：行为分析及源码">JAVA互斥锁(synchronized&amp;Lock)：行为分析及源码 </a></li>
</ol>
</div>
           </div><!-- END .post_content -->
    </div>
    <div class="meta">
          <ul>
      <li class="post_date clearfix">
       <span class="date">18</span>
       <span class="month">Dec</span>
       <span class="year">2013</span>
      </li>
      
<li class="post_comment">
75,262 人阅读</li>

      <li class="post_author"><a href="http://ifeve.com/author/admin/" title="由方 腾飞发布" rel="author">方 腾飞</a></li>      <li class="post_category"><a href="http://ifeve.com/category/java/" rel="category tag">JAVA</a></li><li><a href="http://ifeve.com/category/talk-concurrent/" rel="category tag">本站原创</a></li>       <li class="post_category"><div id="post-ratings-8396" class="post-ratings" itemscope="" itemtype="http://schema.org/Article" data-nonce="5a5c487515"><img id="rating_8396_1" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rating_on.gif" alt="好烂啊" title="好烂啊" onmouseover="current_rating(8396, 1, &#39;好烂啊&#39;);" onmouseout="ratings_off(4.3, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_8396_2" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rating_on.gif" alt="没价值" title="没价值" onmouseover="current_rating(8396, 2, &#39;没价值&#39;);" onmouseout="ratings_off(4.3, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_8396_3" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rating_on.gif" alt="凑合看看" title="凑合看看" onmouseover="current_rating(8396, 3, &#39;凑合看看&#39;);" onmouseout="ratings_off(4.3, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_8396_4" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rating_on.gif" alt="还不错" title="还不错" onmouseover="current_rating(8396, 4, &#39;还不错&#39;);" onmouseout="ratings_off(4.3, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_8396_5" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/rating_half.gif" alt="超赞" title="超赞" onmouseover="current_rating(8396, 5, &#39;超赞&#39;);" onmouseout="ratings_off(4.3, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"> (<strong>16</strong> votes, average: <strong>4.31</strong> out of 5)<br><span class="post-ratings-text" id="ratings_8396_text"></span><meta itemprop="headline" content="聊聊并发（七）——Java中的阻塞队列"><meta itemprop="description" content="原文首发于InfoQ
1. 什么是阻塞队列？
阻塞队列（BlockingQueue）是一个支持两个附加操作的队列。这两个附加的操作是：在队列为空时，获取元素的线程会等待队列变为非空。当队列满时，存储元素的线程会等待队列可用。阻塞队列常用于生产者和消费者的场景，生产者是往队列里添加元素的线程，消费者是从队列里拿元素的线程。阻塞队列就是生产者存放元素的容器，而消费者也只从容器里拿元素。


..."><meta itemprop="datePublished" content="2013-12-18T23:16:53+00:00"><meta itemprop="dateModified" content="2013-12-18T23:25:23+00:00"><meta itemprop="url" content="http://ifeve.com/java-blocking-queue/"><meta itemprop="author" content="方 腾飞"><meta itemprop="mainEntityOfPage" content="http://ifeve.com/java-blocking-queue/"><div style="display: none;" itemprop="publisher" itemscope="" itemtype="https://schema.org/Organization"><meta itemprop="name" content="并发编程网 - ifeve.com"><div itemprop="logo" itemscope="" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content=""></div></div><div style="display: none;" itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating"><meta itemprop="bestRating" content="5"><meta itemprop="worstRating" content="1"><meta itemprop="ratingValue" content="4.31"><meta itemprop="ratingCount" content="16"></div></div><div id="post-ratings-8396-loading" class="post-ratings-loading">
            <img src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/loading(1).gif" width="16" height="16" class="post-ratings-image">Loading...</div></li>       <li class="post_comment"><a href="http://ifeve.com/java-blocking-queue/#comments">2 条评论</a></li>           </ul>
         </div>
   </div><!-- END .post_wrap -->

   
      <div id="comments_wrapper">
    




<div id="comment_header" class="clearfix">

 <ul id="comment_header_left">
  <li id="add_comment"><a href="http://ifeve.com/java-blocking-queue/#respond">发表评论</a></li>
  <li id="comment_feed"><a href="http://ifeve.com/comments/feed/" title="RSS订阅评论">RSS订阅评论</a></li>
 </ul>

 <ul id="comment_header_right">
   <li id="trackback_closed">Trackback 关闭</li>
   <li id="comment_closed">评论 (2)</li>
 </ul>


</div><!-- END #comment_header -->

<div id="comments">

 <div id="comment_area">
  <!-- start commnet -->
  <ol class="commentlist">
	
 <li class="comment guest-comment even_comment" id="comment-4628">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/18f165c286cc0080b3c9660c287fa43a" srcset="http://1.gravatar.com/avatar/18f165c286cc0080b3c9660c287fa43a?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-4628">

Snway
</span>
     </li>
     <li class="comment-date">2013/12/20 12:49下午</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-blocking-queue%2F">登录以回复</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote(&#39;commentauthor-4628&#39;, &#39;comment-4628&#39;, &#39;comment-content-4628&#39;, &#39;comment&#39;);">引用</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-4628">
    <p>归纳得不错，可作为手册参考。</p>
  </div>

</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-20301">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/f887a6fbf38b165979d4cff69b21609a" srcset="http://0.gravatar.com/avatar/f887a6fbf38b165979d4cff69b21609a?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-20301">

田红瀚
</span>
     </li>
     <li class="comment-date">2014/06/11 12:05下午</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-blocking-queue%2F">登录以回复</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote(&#39;commentauthor-20301&#39;, &#39;comment-20301&#39;, &#39;comment-content-20301&#39;, &#39;comment&#39;);">引用</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-20301">
    <p>LinkedBlockingDeque和ArrayBlockingQueue中都使用唯一的ReentrantLock,高并发时竞争还是很严重啊。JCP书里的218页的测试结果显示，高并发下还是两个ReentrantLock的LinkedBlockingQueue的可伸缩性要好。  奇怪的是LinkedBlockingDeque为什么采用一个ReentrantLock,这样两端操作还是有竞争啊。</p>
  </div>

</li><!-- #comment-## -->
  </ol>
  <!-- comments END -->

  
 </div><!-- #comment-list END -->


 <div id="trackback_area">
 <!-- start trackback -->
  <!-- trackback end -->
 </div><!-- #trackbacklist END -->

 


 
 <div class="comment_form_wrapper" id="respond">
    您必须 <a href="http://ifeve.com/wp-login.php">登陆</a> 后才能发表评论 </div>

 </div><!-- #comment end -->   </div>
   
      <div id="previous_next_post_single">
    <div class="clearfix">
     <p id="previous_post"><a href="http://ifeve.com/inter-64-ia-32-8-1/" rel="prev">基于锁的原子操作</a></p>     <p id="next_post"><a href="http://ifeve.com/reentrantlock-and-fairness/" rel="next">ReentrantLock(重入锁)以及公平性</a></p>    </div>
   </div>
   

  </div><!-- END #left_col -->

  <div id="container"></div>

    <div id="right_col">
   

<div class="side_box clearfix" id="side_meta_content">

  <ul id="social_link" class="clearfix">
    <li class="rss_button"><a class="target_blank" href="http://ifeve.com/feed/" target="_blank">rss</a></li>
       </ul>
 
  <div id="search_area">
    <form method="get" id="searchform" action="http://ifeve.com/">
   <div><input id="search_button" class="rollover" type="image" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/search_button.gif" alt="搜索一下" title="搜索一下"></div>
   <div><input id="search_input" type="text" value="搜索一下" name="s" onfocus="if (this.value == &#39;搜索一下&#39;) this.value = &#39;&#39;;" onblur="if (this.value == &#39;&#39;) this.value = &#39;搜索一下&#39;;"></div>
  </form>
   </div>
 
</div>


<div id="side_top">

 <div class="widget_text side_box widget_custom_html" id="custom_html-3">
<div class="textwidget custom-html-widget">

<script async="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/adsbygoogle.js"></script>
<!-- 首页－右上－2 -->
<ins class="adsbygoogle" style="display: inline-block; width: 336px; height: 280px;" data-ad-client="ca-pub-9394337417063147" data-ad-slot="8872369516"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>





<!-- <img src="http://ifeve.com/wp-content/uploads/2018/06/qrcode_for_gh_87611be4f171_258.jpg"/> -->

<!-- <a target="_blank" href="http://edu.bjlemon.com:81/index.html"><img src="http://ifeve.com/wp-content/uploads/2018/06/qrcode_for_gh_87611be4f171_258.jpg"/>
 --></div></div>
		<div class="side_box widget_recent_entries" id="recent-posts-2">
		<h3 class="side_title">近期文章</h3>
		<ul>
											<li>
					<a href="http://ifeve.com/%e3%80%8ahyperledger-fabric%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b%e4%bb%80%e4%b9%88%e6%98%afhyperledger-fabric/">《Hyperledger Fabric官方文档》什么是Hyperledger Fabric?</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e5%ae%9e%e9%99%85%e9%a1%b9%e7%9b%ae%e4%b8%ad%e8%bf%90%e7%94%a8%e8%b4%a3%e4%bb%bb%e9%93%be%e6%a8%a1%e5%bc%8f/">实际项目中运用责任链模式</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e4%bb%a3%e7%a0%81%e8%b5%b0%e6%9f%a5%e5%a6%82%e4%bd%95%e4%bf%9d%e8%af%81%e8%bd%af%e4%bb%b6%e8%b4%a8%e9%87%8f/">代码走查如何保证软件质量</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e3%80%8ahyperledger-fabric%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b%e4%b9%8b%e5%85%b3%e9%94%ae%e6%a6%82%e5%bf%b5%e7%bf%bb%e8%af%91%e9%82%80%e8%af%b7/">《Hyperledger Fabric官方文档》之关键概念翻译邀请</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e5%be%ae%e6%9c%8d%e5%8a%a1%e9%9b%86%e6%88%90%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e6%8e%a2%e7%b4%a2/">微服务集成测试自动化探索</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e3%80%8ahyperledger-fabric%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b%e4%bb%8b%e7%bb%8d/">《Hyperledger Fabric官方文档》介绍</a>
									</li>
											<li>
					<a href="http://ifeve.com/tcp-window-scaling/">TCP 滑动窗口 与窗口缩放因子(Window Scaling)</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e4%b8%8d%e5%8f%af%e9%94%99%e8%bf%87%e7%9a%84cms%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0/">不可错过的CMS学习笔记</a>
									</li>
											<li>
					<a href="http://ifeve.com/network/">白话网络通讯</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e5%9f%ba%e4%ba%8eredis%e7%9a%84%e5%88%86%e5%b8%83%e5%bc%8f%e9%94%81/">基于redis的分布式锁</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e7%8c%ab%e7%8b%97%e9%98%9f%e5%88%97%e7%9a%84%e5%86%8d%e8%a7%a3/">猫狗队列的再解</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e5%a6%82%e4%bd%95%e6%88%90%e4%b8%ba%e4%b8%80%e4%bd%8d%e3%80%8c%e4%b8%8d%e9%82%a3%e4%b9%88%e5%b7%ae%e3%80%8d%e7%9a%84%e7%a8%8b%e5%ba%8f%e5%91%98/">如何成为一位「不那么差」的程序员</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97%e4%ba%8c%e4%b8%89%e4%ba%8b/">消息队列二三事</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e8%ae%be%e8%ae%a1%e4%b8%80%e4%b8%aa%e7%99%be%e4%b8%87%e7%ba%a7%e7%9a%84%e6%b6%88%e6%81%af%e6%8e%a8%e9%80%81%e7%b3%bb%e7%bb%9f/">设计一个百万级的消息推送系统</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e3%80%8apython3-6%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b-4-%e6%9b%b4%e5%a4%9a%e6%b5%81%e7%a8%8b%e6%8e%a7%e5%88%b6%e8%af%ad%e5%8f%a5/">《Python3.6官方文档》– 4.更多流程控制语句</a>
									</li>
											<li>
					<a href="http://ifeve.com/the-beauty-of-javas-concurrent-programming/">Java并发编程之美</a>
									</li>
											<li>
					<a href="http://ifeve.com/java-cyclicbarrier/">java多线程系列：通过对战游戏学习CyclicBarrier</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e3%80%8apython3-6%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b14-%e7%ab%a0/">《Python3.6官方文档》14 章</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90kafka%e4%b9%8bproducer/">源码分析Kafka之Producer</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e5%ae%b9%e5%99%a8docker%e4%b8%ad%e8%bf%90%e8%a1%8cjava%e9%9c%80%e5%85%b3%e6%b3%a8%e7%9a%84%e5%87%a0%e4%b8%aa%e5%b0%8f%e9%97%ae%e9%a2%98/">容器(docker)中运行java需关注的几个小问题</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e4%bd%bf%e7%94%a8%e5%92%8c%e7%90%86%e8%a7%a3%e7%ba%bf%e7%a8%8b%e6%b1%a0/">如何优雅的使用和理解线程池</a>
									</li>
											<li>
					<a href="http://ifeve.com/python3-6-12/">《Python3.6官方文档》– 第12章 虚拟环境和包</a>
									</li>
											<li>
					<a href="http://ifeve.com/python-3-6-13/">《Python3.6官方文档》– 第13章  接下来</a>
									</li>
											<li>
					<a href="http://ifeve.com/hashmap-concurrenthashmap-%e7%9b%b8%e4%bf%a1%e7%9c%8b%e5%ae%8c%e8%bf%99%e7%af%87%e6%b2%a1%e4%ba%ba%e8%83%bd%e9%9a%be%e4%bd%8f%e4%bd%a0%ef%bc%81/">HashMap? ConcurrentHashMap? 相信看完这篇没人能难住你！</a>
									</li>
											<li>
					<a href="http://ifeve.com/raft%e8%ae%ba%e6%96%87%e8%af%bb%e4%b9%a6%e7%ac%94%e8%ae%b0/">Raft论文读书笔记</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e3%80%8apython3-6%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b-%e7%ac%ac%e4%ba%8c%e7%ab%a0-%e4%bd%bf%e7%94%a8python%e8%a7%a3%e9%87%8a%e5%99%a8/">《Python3.6官方文档》– 第二章 使用python解释器</a>
									</li>
											<li>
					<a href="http://ifeve.com/%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%ba%86%e8%a7%a3%e5%bb%b6%e6%97%b6%e9%98%9f%e5%88%97%e5%90%97%e4%b8%80/">你真的了解延时队列吗(一)</a>
									</li>
											<li>
					<a href="http://ifeve.com/mysq-stream-search/">MySQL中流式查询使用</a>
									</li>
											<li>
					<a href="http://ifeve.com/python3-6-10/">《Python3.6官方文档》– 第十章</a>
									</li>
											<li>
					<a href="http://ifeve.com/ethereum-clients-choosing-a-client/">《以太坊官方文档》Ethereum Clients—Choosing a client</a>
									</li>
					</ul>
		</div>
<div class="widget_text side_box widget_custom_html" id="custom_html-5">
<div class="textwidget custom-html-widget"><script async="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/adsbygoogle.js"></script>
<!-- 首页－右上－3 -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="4721371513"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div>
<div class="side_box widget_views" id="views-4">
<h3 class="side_title">热门文章</h3>
<ul>
<li><a href="http://ifeve.com/java-blocking-queue/" title="Google Guava官方教程（中文版）">Google Guava官方教程（中文版）</a> 627,830 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO系列教程（一） Java NIO 概述">Java NIO系列教程（一） Java NIO 概述</a> 463,719 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java并发性和多线程介绍目录">Java并发性和多线程介绍目录</a> 335,908 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO 系列教程">Java NIO 系列教程</a> 329,126 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO系列教程（十二） Java NIO与IO">Java NIO系列教程（十二） Java NIO与IO</a> 260,566 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java8初体验（二）Stream语法详解">Java8初体验（二）Stream语法详解</a> 236,053 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO系列教程（六） Selector">Java NIO系列教程（六） Selector</a> 230,869 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO系列教程（三） Buffer">Java NIO系列教程（三） Buffer</a> 228,425 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO系列教程（二） Channel">Java NIO系列教程（二） Channel</a> 223,031 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="69道Spring面试题和答案">69道Spring面试题和答案</a> 184,105 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="《Storm入门》中文版">《Storm入门》中文版</a> 183,166 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Netty 5用户指南">Netty 5用户指南</a> 176,816 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="并发框架Disruptor译文">并发框架Disruptor译文</a> 164,931 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="面试题">面试题</a> 158,939 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java 7 并发编程指南中文版">Java 7 并发编程指南中文版</a> 146,012 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="Java NIO系列教程（八） SocketChannel">Java NIO系列教程（八） SocketChannel</a> 144,744 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="[Google Guava] 2.3-强大的集合工具类：ja...">[Google Guava] 2.3-强大的集合工具类：ja...</a> 141,304 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="[Google Guava] 3-缓存">[Google Guava] 3-缓存</a> 140,993 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="如何创建并运行java线程">如何创建并运行java线程</a> 134,812 人阅读 </li><li><a href="http://ifeve.com/java-blocking-queue/" title="聊聊并发（三）Java线程池的分析和使用">聊聊并发（三）Java线程池的分析和使用</a> 134,148 人阅读 </li></ul>
</div>
<div class="widget_text side_box widget_custom_html" id="custom_html-4">
<div class="textwidget custom-html-widget"><script async="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/adsbygoogle.js"></script>
<!-- 首页－右边－4 -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="6198104715"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div>
</div>
<div id="side_middle" class="clearfix">
 <div id="side_left">
  <div class="side_box_short widget_categories" id="categories-2">
<h3 class="side_title">分类目录</h3>
		<ul>
	<li class="cat-item cat-item-415"><a href="http://ifeve.com/category/android/">Android</a> (3)
</li>
	<li class="cat-item cat-item-1101"><a href="http://ifeve.com/category/architecture/">Architecture</a> (2)
</li>
	<li class="cat-item cat-item-289"><a href="http://ifeve.com/category/c/">C++</a> (12)
</li>
	<li class="cat-item cat-item-366"><a href="http://ifeve.com/category/cpu-2/">CPU</a> (2)
</li>
	<li class="cat-item cat-item-73"><a href="http://ifeve.com/category/framework/">Framework</a> (74)
<ul class="children">
	<li class="cat-item cat-item-387"><a href="http://ifeve.com/category/framework/akka/">akka</a> (20)
</li>
</ul>
</li>
	<li class="cat-item cat-item-458"><a href="http://ifeve.com/category/go/">GO</a> (6)
</li>
	<li class="cat-item cat-item-617"><a href="http://ifeve.com/category/groovy/">groovy</a> (6)
</li>
	<li class="cat-item cat-item-310"><a href="http://ifeve.com/category/guava-2/">guava</a> (24)
</li>
	<li class="cat-item cat-item-69"><a href="http://ifeve.com/category/java/">JAVA</a> (917)
</li>
	<li class="cat-item cat-item-127"><a href="http://ifeve.com/category/jvm/">JVM</a> (47)
</li>
	<li class="cat-item cat-item-300"><a href="http://ifeve.com/category/linux/">linux</a> (10)
</li>
	<li class="cat-item cat-item-1061"><a href="http://ifeve.com/category/microservices/">microservices</a> (1)
</li>
	<li class="cat-item cat-item-280"><a href="http://ifeve.com/category/netty/">Netty</a> (32)
</li>
	<li class="cat-item cat-item-1107"><a href="http://ifeve.com/category/python/">Python</a> (2)
</li>
	<li class="cat-item cat-item-632"><a href="http://ifeve.com/category/react/">react</a> (6)
</li>
	<li class="cat-item cat-item-623"><a href="http://ifeve.com/category/redis/">redis</a> (25)
</li>
	<li class="cat-item cat-item-166"><a href="http://ifeve.com/category/scala/">Scala</a> (11)
</li>
	<li class="cat-item cat-item-672"><a href="http://ifeve.com/category/spark/">spark</a> (19)
</li>
	<li class="cat-item cat-item-1011"><a href="http://ifeve.com/category/spring/">Spring</a> (23)
</li>
	<li class="cat-item cat-item-388"><a href="http://ifeve.com/category/storm/">storm</a> (44)
</li>
	<li class="cat-item cat-item-620"><a href="http://ifeve.com/category/thinking/">thinking</a> (3)
</li>
	<li class="cat-item cat-item-485"><a href="http://ifeve.com/category/velocity/">Velocity</a> (10)
</li>
	<li class="cat-item cat-item-279"><a href="http://ifeve.com/category/web/">Web</a> (18)
</li>
	<li class="cat-item cat-item-980"><a href="http://ifeve.com/category/zookeeper/">zookeeper</a> (1)
</li>
	<li class="cat-item cat-item-148"><a href="http://ifeve.com/category/notice/">公告</a> (5)
</li>
	<li class="cat-item cat-item-1103"><a href="http://ifeve.com/category/%e5%8c%ba%e5%9d%97%e9%93%be/">区块链</a> (3)
</li>
	<li class="cat-item cat-item-378"><a href="http://ifeve.com/category/bigdata/">大数据</a> (35)
</li>
	<li class="cat-item cat-item-138"><a href="http://ifeve.com/category/%e5%a5%bd%e6%96%87%e6%8e%a8%e8%8d%90/">好文推荐</a> (34)
</li>
	<li class="cat-item cat-item-244"><a href="http://ifeve.com/category/%e5%b9%b6%e5%8f%91%e4%b9%a6%e7%b1%8d/">并发书籍</a> (97)
</li>
	<li class="cat-item cat-item-29"><a href="http://ifeve.com/category/concurrency-translation/" title="发布国外并发编程相关文献译文。">并发译文</a> (416)
</li>
	<li class="cat-item cat-item-979"><a href="http://ifeve.com/category/%e6%84%9f%e6%82%9f/">感悟</a> (5)
</li>
	<li class="cat-item cat-item-7"><a href="http://ifeve.com/category/ask/" title="可以在这里发表并发编程的问题。如何发表？用QQ登陆，然后点击“新建文章”，管理员审核后就可以发表。">技术问答</a> (12)
</li>
	<li class="cat-item cat-item-147"><a href="http://ifeve.com/category/%e6%95%8f%e6%8d%b7%e7%ae%a1%e7%90%86/">敏捷管理</a> (6)
</li>
	<li class="cat-item cat-item-1"><a href="http://ifeve.com/category/talk-concurrent/">本站原创</a> (89)
</li>
	<li class="cat-item cat-item-367"><a href="http://ifeve.com/category/%e6%9e%b6%e6%9e%84/">架构</a> (38)
</li>
	<li class="cat-item cat-item-305"><a href="http://ifeve.com/category/%e6%b4%bb%e5%8a%a8/">活动</a> (6)
</li>
	<li class="cat-item cat-item-414"><a href="http://ifeve.com/category/%e7%bd%91%e7%bb%9c/">网络</a> (7)
</li>
	<li class="cat-item cat-item-1100"><a href="http://ifeve.com/category/%e9%9d%a2%e8%af%95/">面试</a> (1)
</li>
		</ul>
</div>
 </div>
 <div id="side_right">
  <div class="side_box_short widget_tag_cloud" id="tag_cloud-4">
<h3 class="side_title">标签</h3>
<div class="tagcloud"><a href="http://ifeve.com/tag/actor/" class="tag-cloud-link tag-link-226 tag-link-position-1" style="font-size: 12.421052631579pt;" aria-label="actor (17个项目)">actor</a>
<a href="http://ifeve.com/tag/basic/" class="tag-cloud-link tag-link-213 tag-link-position-2" style="font-size: 11.438596491228pt;" aria-label="Basic (14个项目)">Basic</a>
<a href="http://ifeve.com/tag/classes/" class="tag-cloud-link tag-link-251 tag-link-position-3" style="font-size: 8.6140350877193pt;" aria-label="classes (8个项目)">classes</a>
<a href="http://ifeve.com/tag/collections/" class="tag-cloud-link tag-link-260 tag-link-position-4" style="font-size: 10.210526315789pt;" aria-label="collections (11个项目)">collections</a>
<a href="http://ifeve.com/tag/concurrency/" class="tag-cloud-link tag-link-111 tag-link-position-5" style="font-size: 20.157894736842pt;" aria-label="concurrency (77个项目)">concurrency</a>
<a href="http://ifeve.com/tag/concurrent/" class="tag-cloud-link tag-link-214 tag-link-position-6" style="font-size: 11.070175438596pt;" aria-label="Concurrent (13个项目)">Concurrent</a>
<a href="http://ifeve.com/tag/concurrent-data-structure/" class="tag-cloud-link tag-link-322 tag-link-position-7" style="font-size: 11.070175438596pt;" aria-label="concurrent data structure (13个项目)">concurrent data structure</a>
<a href="http://ifeve.com/tag/concurrenthashmap/" class="tag-cloud-link tag-link-61 tag-link-position-8" style="font-size: 8pt;" aria-label="ConcurrentHashMap (7个项目)">ConcurrentHashMap</a>
<a href="http://ifeve.com/tag/customizing/" class="tag-cloud-link tag-link-250 tag-link-position-9" style="font-size: 8.6140350877193pt;" aria-label="Customizing (8个项目)">Customizing</a>
<a href="http://ifeve.com/tag/executor/" class="tag-cloud-link tag-link-177 tag-link-position-10" style="font-size: 13.157894736842pt;" aria-label="Executor (20个项目)">Executor</a>
<a href="http://ifeve.com/tag/executor-framework/" class="tag-cloud-link tag-link-231 tag-link-position-11" style="font-size: 12.666666666667pt;" aria-label="Executor framework (18个项目)">Executor framework</a>
<a href="http://ifeve.com/tag/faq/" class="tag-cloud-link tag-link-39 tag-link-position-12" style="font-size: 11.070175438596pt;" aria-label="faq (13个项目)">faq</a>
<a href="http://ifeve.com/tag/fork/" class="tag-cloud-link tag-link-232 tag-link-position-13" style="font-size: 10.578947368421pt;" aria-label="fork (12个项目)">fork</a>
<a href="http://ifeve.com/tag/forkjoin/" class="tag-cloud-link tag-link-224 tag-link-position-14" style="font-size: 9.2280701754386pt;" aria-label="Fork/Join (9个项目)">Fork/Join</a>
<a href="http://ifeve.com/tag/fork-join/" class="tag-cloud-link tag-link-53 tag-link-position-15" style="font-size: 8.6140350877193pt;" aria-label="fork join (8个项目)">fork join</a>
<a href="http://ifeve.com/tag/framework/" class="tag-cloud-link tag-link-1018 tag-link-position-16" style="font-size: 14.263157894737pt;" aria-label="Framework (25个项目)">Framework</a>
<a href="http://ifeve.com/tag/functional-programming/" class="tag-cloud-link tag-link-460 tag-link-position-17" style="font-size: 9.719298245614pt;" aria-label="Functional Programming (10个项目)">Functional Programming</a>
<a href="http://ifeve.com/tag/guava/" class="tag-cloud-link tag-link-309 tag-link-position-18" style="font-size: 12.421052631579pt;" aria-label="Guava (17个项目)">Guava</a>
<a href="http://ifeve.com/tag/io/" class="tag-cloud-link tag-link-129 tag-link-position-19" style="font-size: 14.508771929825pt;" aria-label="IO (26个项目)">IO</a>
<a href="http://ifeve.com/tag/java/" class="tag-cloud-link tag-link-1016 tag-link-position-20" style="font-size: 22pt;" aria-label="JAVA (109个项目)">JAVA</a>
<a href="http://ifeve.com/tag/java8/" class="tag-cloud-link tag-link-342 tag-link-position-21" style="font-size: 11.070175438596pt;" aria-label="java8 (13个项目)">java8</a>
<a href="http://ifeve.com/tag/jmm/" class="tag-cloud-link tag-link-31 tag-link-position-22" style="font-size: 15.614035087719pt;" aria-label="jmm (32个项目)">jmm</a>
<a href="http://ifeve.com/tag/join/" class="tag-cloud-link tag-link-233 tag-link-position-23" style="font-size: 10.578947368421pt;" aria-label="join (12个项目)">join</a>
<a href="http://ifeve.com/tag/jvm/" class="tag-cloud-link tag-link-1019 tag-link-position-24" style="font-size: 13.40350877193pt;" aria-label="JVM (21个项目)">JVM</a>
<a href="http://ifeve.com/tag/lock/" class="tag-cloud-link tag-link-17 tag-link-position-25" style="font-size: 14.508771929825pt;" aria-label="lock (26个项目)">lock</a>
<a href="http://ifeve.com/tag/memory-barriers/" class="tag-cloud-link tag-link-75 tag-link-position-26" style="font-size: 9.719298245614pt;" aria-label="Memory Barriers (10个项目)">Memory Barriers</a>
<a href="http://ifeve.com/tag/netty/" class="tag-cloud-link tag-link-1027 tag-link-position-27" style="font-size: 13.40350877193pt;" aria-label="Netty (21个项目)">Netty</a>
<a href="http://ifeve.com/tag/nio/" class="tag-cloud-link tag-link-1021 tag-link-position-28" style="font-size: 12.421052631579pt;" aria-label="NIO (17个项目)">NIO</a>
<a href="http://ifeve.com/tag/oauth-2-0/" class="tag-cloud-link tag-link-380 tag-link-position-29" style="font-size: 8.6140350877193pt;" aria-label="OAuth 2.0 (8个项目)">OAuth 2.0</a>
<a href="http://ifeve.com/tag/pattern-matching/" class="tag-cloud-link tag-link-167 tag-link-position-30" style="font-size: 8.6140350877193pt;" aria-label="pattern-matching (8个项目)">pattern-matching</a>
<a href="http://ifeve.com/tag/ringbuffer/" class="tag-cloud-link tag-link-91 tag-link-position-31" style="font-size: 8pt;" aria-label="RingBuffer (7个项目)">RingBuffer</a>
<a href="http://ifeve.com/tag/scala/" class="tag-cloud-link tag-link-1023 tag-link-position-32" style="font-size: 13.649122807018pt;" aria-label="Scala (22个项目)">Scala</a>
<a href="http://ifeve.com/tag/service-mesh/" class="tag-cloud-link tag-link-1063 tag-link-position-33" style="font-size: 8.6140350877193pt;" aria-label="service mesh (8个项目)">service mesh</a>
<a href="http://ifeve.com/tag/slf4j/" class="tag-cloud-link tag-link-813 tag-link-position-34" style="font-size: 8.6140350877193pt;" aria-label="slf4j (8个项目)">slf4j</a>
<a href="http://ifeve.com/tag/spark/" class="tag-cloud-link tag-link-634 tag-link-position-35" style="font-size: 12.421052631579pt;" aria-label="spark (17个项目)">spark</a>
<a href="http://ifeve.com/tag/spark%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3/" class="tag-cloud-link tag-link-635 tag-link-position-36" style="font-size: 12.421052631579pt;" aria-label="spark官方文档 (17个项目)">spark官方文档</a>
<a href="http://ifeve.com/tag/stm/" class="tag-cloud-link tag-link-199 tag-link-position-37" style="font-size: 10.578947368421pt;" aria-label="stm (12个项目)">stm</a>
<a href="http://ifeve.com/tag/storm/" class="tag-cloud-link tag-link-351 tag-link-position-38" style="font-size: 16.59649122807pt;" aria-label="Storm (39个项目)">Storm</a>
<a href="http://ifeve.com/tag/synchronization/" class="tag-cloud-link tag-link-216 tag-link-position-39" style="font-size: 11.684210526316pt;" aria-label="synchronization (15个项目)">synchronization</a>
<a href="http://ifeve.com/tag/synchronized/" class="tag-cloud-link tag-link-15 tag-link-position-40" style="font-size: 9.719298245614pt;" aria-label="Synchronized (10个项目)">Synchronized</a>
<a href="http://ifeve.com/tag/thread/" class="tag-cloud-link tag-link-11 tag-link-position-41" style="font-size: 17.210526315789pt;" aria-label="thread (44个项目)">thread</a>
<a href="http://ifeve.com/tag/tomcat/" class="tag-cloud-link tag-link-347 tag-link-position-42" style="font-size: 9.2280701754386pt;" aria-label="tomcat (9个项目)">tomcat</a>
<a href="http://ifeve.com/tag/volatile/" class="tag-cloud-link tag-link-25 tag-link-position-43" style="font-size: 11.438596491228pt;" aria-label="volatile (14个项目)">volatile</a>
<a href="http://ifeve.com/tag/%e5%a4%9a%e7%ba%bf%e7%a8%8b/" class="tag-cloud-link tag-link-197 tag-link-position-44" style="font-size: 9.719298245614pt;" aria-label="多线程 (10个项目)">多线程</a>
<a href="http://ifeve.com/tag/%e5%b9%b6%e5%8f%91%e8%af%91%e6%96%87%ef%bc%8cjava-%ef%bc%8cmaven/" class="tag-cloud-link tag-link-1034 tag-link-position-45" style="font-size: 16.228070175439pt;" aria-label="并发译文，Java ，Maven (36个项目)">并发译文，Java ，Maven</a></div>
</div>
 </div>
</div>
<div id="side_bottom">
 <div class="widget_text side_box widget_custom_html" id="custom_html-2">
<div class="textwidget custom-html-widget"><script async="" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/adsbygoogle.js"></script>
<!-- 摩天大楼 -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="6358703113"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- 
<script type="text/javascript">
    /*自适应 创建于 June 30, 2016*/
    var cpro_id = "u2690738";

<script type="text/javascript" src="http://cpro.baidustatic.com/cpro/ui/i.js"></script>
 -->

<!-- CNZZ -->
<script src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/stat.php" language="JavaScript"></script><script src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=5003572" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/pic.gif"></a></div></div>
</div>

  </div>
  
  <div id="footer">

<ul id="copyright">
    <li>版权所有 ©&nbsp; <a href="http://ifeve.com/">并发编程网 – ifeve.com</a></li>
    <li>ICP号: <a href="http://www.miibeian.gov.cn/" target="_blank">浙ICP备12046809号</a></li>
 <li>	
<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602005873" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="http://ifeve.com/java-blocking-queue/" style="float:left;">浙公网安备 33010602005873号</a></li>
   </ul>
		 
		 

 </div>

	
 </div><!-- END #main_content -->

  <p id="return_top" style="display: none;"><a href="http://ifeve.com/java-blocking-queue/#header">return top</a></p>
 
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/shCore.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/shBrushJava.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/shBrushCpp.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/shBrushPlain.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shCore.css?ver=2.1.364";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shThemeEclipse.css?ver=2.1.364";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://ifeve.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = '查看源代码';
	SyntaxHighlighter.config.strings.copyToClipboard = '复制到剪贴板';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = '代码现在在你的剪贴板';
	SyntaxHighlighter.config.strings.print = '打印';
	SyntaxHighlighter.config.strings.help = '帮助';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = '无法找到Brush：';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush不能设置 html-script选项';
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.all();
</script>
<link rel="stylesheet" id="yarppRelatedCss-css" href="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/related.css" type="text/css" media="all">
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/core.min.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/widget.min.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/tabs.min.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/comment-reply.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"http:\/\/ifeve.com\/wp-content\/plugins\/wp-postratings","ajax_url":"http:\/\/ifeve.com\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 item at a time.","image":"stars_crystal","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src="http://ifeve.com/wp-content/plugins/wp-postratings/images/stars_crystal/rating_over.gif";;
/* ]]> */
</script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/postratings-js.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/ifeve.com\/wp-admin\/admin-ajax.php","post_id":"8396"};
/* ]]> */
</script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/postviews-cache.js"></script>
<script type="text/javascript" src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/wp-embed.min.js"></script>



<script src="http://ajax.useso.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script src="./聊聊并发（七）——Java中的阻塞队列 _ 并发编程网 – ifeve.com_files/jquery.bpopup-0.8.0.min.js"></script>

<!-- Dynamic page generated in 1.705 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2018-12-11 20:37:34 -->

<!-- Compression = gzip -->
<!-- super cache --></body></html>