<!DOCTYPE html>
<!-- saved from url=(0037)https://zhuanlan.zhihu.com/p/51374915 -->
<html lang="zh" data-hairline="true" data-theme="light" data-focus-method="keyboard"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>老大难的 Java ClassLoader 再不理解就老了 - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"><title>知乎 - 有问题上知乎</title><meta data-react-helmet="true" property="description" content="ClassLoader 是 Java 届最为神秘的技术之一，无数人被它伤透了脑筋，摸不清门道究竟在哪里。网上的文章也是一篇又一篇，经过本人的亲自鉴定，绝大部分内容都是在误导别人。本文我带读者彻底吃透 ClassLoader，以后…"><meta data-react-helmet="true" property="og:title" content="老大难的 Java ClassLoader 再不理解就老了"><meta data-react-helmet="true" property="og:url" content="https://zhuanlan.zhihu.com/p/51374915"><meta data-react-helmet="true" property="og:description" content="ClassLoader 是 Java 届最为神秘的技术之一，无数人被它伤透了脑筋，摸不清门道究竟在哪里。网上的文章也是一篇又一篇，经过本人的亲自鉴定，绝大部分内容都是在误导别人。本文我带读者彻底吃透 ClassLoader，以后…"><meta data-react-helmet="true" property="og:image" content="https://pic1.zhimg.com/v2-09c3b95189b59c5acd7a96250a355b52_b.jpg"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="og:site_name" content="知乎专栏"><link data-react-helmet="true" rel="apple-touch-icon" href="data:image/png;base64,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"><link data-react-helmet="true" rel="apple-touch-icon" href="data:image/png;base64,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" sizes="152x152"><link data-react-helmet="true" rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAACz5JREFUeAHtXQ2QFMUVfne3e397e3uAgkaRHw2KETSKWAEkgopa/AhCIhhFY340ksOkyopWpVJWfqrwNyYklcTCpERjMBoB0SCElAELUFIVlIoBDSJeQULgDrjbu9v72WUv7x013uxMd+/cXM9sb1+/qr2b6enp6fe+ed1vul+/Lkk80tgDhrSVQKm2nBnGeiVgANb8RTAAG4A1l4Dm7BkNNgBrLgHN2TMabADWXAKas2c02ACsuQQ0Z89osAFYcwlozp7RYAOw5hLQnD2jwQZgzSWgOXtGgw3AmktAc/aMBhuAw5NAbUUJzBgdhW9cXgllJeE9V+cnRVRgbsq5EVh+VTVcOyYKUUR21+E0rNrdqULVir4OBQW4prwEnrg+BosvqcwR5Mt7u3LOzYl/CRQM4OoowIbFtXD52Xhgo1PZHlj/oQHYJpIBHRbMyHp6TtwFLnGyrSENTSnjqj0gVG03FwTgqSMjMHdcha0afYemee6ThYyjggD80LRqZt3Tp3rg9X93M6+ZRH8SCB3gkbWlMG1kbr9rVX3HoTS0dpvm2ZKHjP+hAzz/ogooKWF/5G4+YLRXBqj2MkIHeMFF5fbn5xxv+sgAnCMQCSehfiaNSpQyLWfiY//xDBxszkpgyV8RqoycoRkilUIFmJpnHm0+kOZdCjydwD3+vTMCf46XB9Q92uQlm+c8oQK8cDwf4G9PrgL6BUXZnh5453AG7liXhOMdktUkqEpLKDe0PnjcsDKYOCLU9ylHPKVo2E1B6/0H02M56bqfhAbwly/ma2+YQp47jm/khVmPsJ4VHsCfUwPgYdWlcHZNaGyHhSP3OaFwOv28KJyXKONWIuwLw2Ps7/Cw6xHG80LpFG+boIb2WgKNlOYCzBl36c0u26q16tD8YDhWe+AAJ9BL4+YL+QDPfK4Zdh/JWHy7/q9ZGIebLmDfP2nVSfjoxCnXPSahTwKBN9G3Yt9bFc3VGOvxNLghApfylQnUK4Nzx4bEEggc4Lsuy/XWsFfn2T353XKighrip62hPBIQiC/PnR4uf3FUFC4+k90LdGV6YM37+T03IgLbzACcH4RAAa4XjEw9vjMFJzyMKEUdBpGdpcKNXNtrofZxYACPP6MMrhvLHlTYfSQNT73T4Uky5QINJgcBQ2IJBAYwT3s/bMrAl15OgldsnJ80dna6jQFtFwfzOBCAz8KRokWMock3D3bD7DUt/RrsF2qwaaOZoNoT2RaQPYeP43uvqIRy2wTrwZOngPrcP3gwqpyPq7CV47xmmminRNzn0gGuxBLJeiZtfe9/Gfjrx93wNk7T+e0to4I+2DTRbkCdKdIB7sRBqRnPtTif4/vc3hLYCyHt9fvS2MvR/TiQPlim0Hh9cAq/ow3ll4DyAPP64I7Cefjkl6pCOdQHmNOJdBoN9vQaKQ0wGdDkasOiVNo00Sy5ONOUBriCo73ERIdEgNmvkFNUxXmuNsCCb2CZS1x0bguUBrgywtetZJc8WPhPKU6ttddaaYBFTbRMDbYLRLdjpQGuEmhwq0QN1g1UOz9KAxzDGB48ajPLTHmiyUkX2Kk5+XydTBheBk/OqsEFZxEQTfv5KfyBKdVAPz+0dl8X3L2h1c+tRXdPYBpMKwlfW5KAyedEpYM7UCnfgmukyFd7MFBgAP9kZgzqKgMrfsDYXDfWAOxbiKPrSmHOZ9nuOr4LlXzjJcMD7Z0k19Z/cYGoGC0T5YVp8F9VuXeeEw+EdbmVlFBaIFzOGK229pLcEgp3HxJw/bSIQNqpOeh3JYMO1A8FWg3opKZUFi74xQlnsjlnSMAtPUamQiTF8RuYBS7V5ZNm407pFRNlAR47hF+1TwoYrMWrYFXJx5digWs4Zgjf285osHdw1AW4zgDsHUZ+TmUBvlQQsGVfk9w+mOM0wpdaEV1RFuCpnHiWrV3ZXn/rIpKx56r2BLBcUkmAL8SQS2fG2FXbcSjz6bommsQYUsmfcfIsWY0zsqVYYIanCSYC3mo4Hc+SFpZv+koC1t2aAPqkMsSWgJIAXy0AmJbBrLyxBn52Q03v+qfLzorAC7fE8ZjN4GBPVQ5g2svhes664m5crvLkrBgsvTQ3LMT0UeXw9Oz4YMeSyb9yAM/DUP88Tw5ap+TcxMPiagFOcPx4hj8HAKsMHf8rB/ASQUytZ9/rFPpD10+uhntw6aqhPgkoBfC5GO6f52lBnxArtrfDfRvFrjYrro3BbMXnovvEH/yRUgAvnVjJnUd+F9caH23vgXUfdMOjO1JcydBSl1Vz40DGlyFc+qOKEOowIt49k/jN68b9feH+V2xPwauCzbOqMfDaHxfWAm0AMthJGQksw5BLiQp+dTY69nO49/VW2HOUHwJxBMYJeWlR7aD/RuZLNMRXvw5Ho0TGEQG5tzF3/LkDsV3yShKOtvEjsYzHIGyr58cH9U6mSgB8/1VVUCvQXrKeWfTf1izctjYJorXCM8eUw2O4AeZgpYJbIhQwbdmV/L0a2nEFg2i7u39gpNr6N9p6DSseiF/7fBWs29cN23Hjrf6SM+zv3sYMTPldM7cYcvb/FQ66TFDEa7OgGkxRCn950+khR57ECNx8y1Qoz0/f5lvWVHY9thI86s9INsXeHMEIKB5BST40tRreXFqnDLjEb0EBvm9SFVzxGb4DOm01u/LvYuAs0H70Vgr+vJ8f3PQLuAk1D8j+LkSlZt9OpLV/u7MOaE9G2uBaJSoYwORz9f2rxUOLf8I1RB+f5BtRTkF+87VWeP8Y27KmPp4GUljUX0hoG3oi2Vrb3xeNxYszjc2xM5fk8xjK5/cLarmBwulxtM/R4zu9BSy1qteOXSxZ1o3t7Jcijt/aMoj8vicqrLV2HgsC8G9wc2heHGmrcqvRcvYTrv9QMgu34+ZXNPPkJDnwQq8zwta71Oprnbxa56Fb0Q9OreJuDm1V6kRHFqhP9Uu7/pOB+ze1wa8dU4i8ReNd+Ik97LHcLeUsPy16Kf75raFAAVbtxIv+Q3kofOMDW9rgML5sRAF44vSW6+VPbq293DGAPPNwUyqyNPPRD7e1w8lOtwbmu89+naLJr9zV95JQk39EMChCCm//ZRAb+qXx9xeP294ew67h7g1JWIThksl32yrDXm6+YzsPMo5DA3jW+VF4Zl6cO5lgMbMFhbl6D98atvJ5+f/w1hRYW9ZS001g+aF8ANNMFw3GXIm7wKzF722VKJQmmtbiPj+/NifEMEsIZBwte0M8Hci6j5dGbcDX0bLecnsCDmBIY7+0tSHd26ezAqN+gAHOv7O5rXfjS7/lB3lf4ADPHBOFF9BirhAEVCEGKXrsneuTcAynBGUSDZIsRsua54br5VlUxk4cBbvGtmqShkefwBjYP9/V4btl8PLsgeYJFGCaeP8tNsv5wKUmbjkaRTvRoS4IamjJQkPLwJp9aqYtgLehZ+d3UWv7840eBF9eygysD16O03/PL4iDKJgZVZAc2b/6aqunLXa8MBRUns0I8HFctkrTlDe/mCwKcEkWJYlHGqW2iTS68xS6tN6B3hkiomHI9eid8TBazNbnhCi/Ctdom76WIovPJbWJpnD+L6InhdWUsUB5F7fUeQknB17BYUjZ/S3reTLTig1c4l26BtMwJC0co+1kh1adHjuisIOHsB/8F061NaakNhgy8dOyLOkAaymlImYqMCOriGWiVdUNwFrB6WbGAOyWiVYpBmCt4HQzYwB2y0SrFAOwVnC6mTEAu2WiVYoBWCs43cwYgN0y0SrFAKwVnG5mDMBumWiVYgDWCk43MwZgt0y0SjEAawWnmxkDsFsmWqUYgLWC082MAdgtE61SDMBawelmxgDslolWKf8HP5/lDXtgLMUAAAAASUVORK5CYII=" sizes="120x120"><link data-react-helmet="true" rel="apple-touch-icon" href="data:image/png;base64,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" sizes="76x76"><link data-react-helmet="true" rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAABVNJREFUaAXtWntsU1UY//Xdzq5dmUN0TJYNFufChClR+QNDgg+QGAWULcQQUYImJhKN8Q8TohITMYLzlRBN1CwhKsGwEOJrCQsjExcjIi4BH0FxGNmLsK2vtV3rObe053R93NN778pd1y/pende9/ud73e+75zv1OB+YziGOSTGOYRVgloCXOwWL1m4ZOEim4ESpYvMoGlwShZOmxKZArsZeHK5He8+4JRpqY9qVRa+4yYz+p7yYO99TlhN+gAkpwWxjzJx2Qz4YqMLlWXxOTt8blLZQAXupdjC25bZk2C9oRiO/RUusOrKXqcY8IZGW/KNxy+EEI4m/9X1gyJK13uMaL6Bde06r866V166XvUkVewZERqDaS3UPN5oI2ddWtJ+v1P6iA4xMRnF2gNj6B+eEu2iWTtFlN7cZFelQLnNiIdvYUtC1WB5ds7bwncvNKN+nvoYVOkwZFRVlJq0s5KlkDfgx5uZdX3EOy95fxR+bgmf3uFBbUV8Qj74MYCXj/kyArtWhXlR2k1iL09FGnt5sBSEiRsxEtVfuoxTT37OnyBbyDJLnIrU8bzZ60/rZDUyqk7pMFQJA7aQlk/f7pAADvuiaPtyAv+MpyPit5iR9Oq0CSp0gfAafrDBikveKDp+CYKuzbHJzHS1mJiFwzqktDDgznMh0I+c2DgHHuCcmVy/QtULU1pUId7C3nBmFoiONRPtNAVMz8a80LClN9EWMLd+KdCiB+y4GrISVqXHRr3JNBLmVm/VzRZ0PFKOCrsYMY60ubMOSD1+y4eX0zYuWTtoVCGmOXkZDTbtJG8lClZOvwVOI1bWWOSaaV4vDHhljRl1Hi7maKBKvcbjiagkTOnegQjkTjI773LglXuuk95L1+/Ct0dFdChoG2ELi2hV62YMuDhe+MO9iI6aAq4jqZ+EDIzpcCNNlGMaJjRV+E0PScsXsBXSPxxRONLMdtMMcPN8M2jqJiE9F8LYepsNK0iyXk+imTZr6liIicVi2LLUjk232nAlGE/YnR3Rx5pmJlFphseaWFJu0BfDhkarNCKN24cedeFGEnf1IJpoQe+YGioZWfb/FMCrx1k2pNplwkEC2mllZ+VrBV4TwM+T+MvL13+E8E5fAJ/1B5PFS8ka/+ShcnAZoGRdIR9UA26eb8K6JYzOpy9F8NtofL0+940XfRdZFuDeeiv2rIlvTAoJkn8X4yFfKvhMCUqvSnn5lKSAEhIiuLccHkf31grUEFpT2d7iwMc/B5HNiSVyzbt7fNh7MiD1WeQ24r21TqxaFPcLUqHCP6osvL3FjhXVzDsPkeTe5xyNqU4j/hjaDo2nnI3Xk/yYnKyujbehl+292zyagKXvVAx4GdlkvLY6lZ77TvoRzLDfoHdIO45OgIYrKm4uXksFGf7cWW3GkVaXxCAtnZ0iSleVGXCAnIvtZuZ1z5Kd1UenGJ2nYzhKHNnuHj92kcNFaCo1McAfSlpJeNu/vhw0N5agMG3f/kMAb5EJpctEjeQN2GM3oLPVDRpqEhImCj3zlRfTcCSqk9/7iNKNVSb8eTm71l3nQ4gSJhgN8cn8fiCMnd968ftVR5gcTOFDXoDnkQuwzs1uNFWldnuxywfqnUXkWTIxbjJp2WQ0EMOp/yJYTC7sdnX70HFG259SpGqeTQtS3lBJNg+bXMmLMtp0kKRpXvjOC0pXUZkkxh0iO7Fc8voJP34dikgOL1c7JXVCgKk91i22SlY8MxjBvxNRnCCHA0q/mfipQ/ffLHYrAZWrj6H0i/hc01MEdYrj8GzFXgI8Wy0nqnfJwqIzNVvblSw8Wy0nqvecs/D/MzttivqHJ2cAAAAASUVORK5CYII=" sizes="60x60"><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/static/favicon.ico"><link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/static/search.xml" title="知乎"><link rel="dns-prefetch" href="https://static.zhimg.com/"><link rel="dns-prefetch" href="https://pic1.zhimg.com/"><link rel="dns-prefetch" href="https://pic2.zhimg.com/"><link rel="dns-prefetch" href="https://pic3.zhimg.com/"><link rel="dns-prefetch" href="https://pic4.zhimg.com/"><link href="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/column.app.8651c92d31e32c481b43.css" rel="stylesheet"><script defer="" crossorigin="anonymous" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/init.js" data-sentry-config="{&quot;dsn&quot;:&quot;https://65e244586890460588f00f2987137aa8@crash2.zhihu.com/193&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;505-dae4c47b&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrors&quot;:[&quot;origin message&quot;,&quot;Network request failed&quot;,&quot;Loading chunk&quot;,&quot;这个系统不支持该功能。&quot;,&quot;Can&#39;t find variable: webkit&quot;,&quot;Can&#39;t find variable: $&quot;,&quot;内存不足&quot;,&quot;out of memory&quot;,&quot;DOM Exception 18&quot;,&quot;zfeedback sdk 初始化失败！&quot;,&quot;zfeedback sdk 加载失败！&quot;,&quot;The operation is insecure&quot;,&quot;[object Event]&quot;,&quot;[object FileError]&quot;,&quot;[object DOMError]&quot;,&quot;[object Object]&quot;,&quot;拒绝访问。&quot;,&quot;Maximum call stack size exceeded&quot;,&quot;UploadError&quot;,&quot;无法 fetch&quot;,&quot;draft-js&quot;,&quot;缺少 JavaScript 对象&quot;,&quot;componentWillEnter&quot;,&quot;componentWillLeave&quot;,&quot;componentWillAppear&quot;,&quot;getInlineStyleAt&quot;,&quot;getCharacterList&quot;],&quot;whitelistUrls&quot;:[&quot;static.zhihu.com&quot;]}"></script><script nonce="a75ce991-8d85-4e9a-b69a-6904e9cd655a">if (window.requestAnimationFrame) {    window.requestAnimationFrame(function() {      window.FIRST_ANIMATION_FRAME = Date.now();    });  }</script><script type="text/javascript" charset="utf-8" async="" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/column.modals.9c9f6368d05bda7eda02.js"></script><script type="text/javascript" charset="utf-8" async="" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/column.richinput.dc347d1f64cd14c17fe5.js"></script></head><body class=""><div id="root"><div class="App" data-reactroot=""><div class="LoadingBar"></div><main role="main" class="App-main"><div class="Post-content" data-zop-usertoken="{&quot;userToken&quot;:&quot;xiaobeimi&quot;}" data-zop="{&quot;authorName&quot;:&quot;老钱&quot;,&quot;itemId&quot;:51374915,&quot;title&quot;:&quot;老大难的 Java ClassLoader 再不理解就老了&quot;,&quot;type&quot;:&quot;article&quot;}" data-za-detail-view-path-module="PostItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;token&quot;:&quot;51374915&quot;}}}"><div class="ColumnPageHeader-Wrapper"><div><div class="Sticky ColumnPageHeader is-fixed" style="width: 1293.64px; top: 0px; left: 0px;"><div class="ColumnPageHeader-content"><a href="https://www.zhihu.com/" aria-label="知乎"><svg viewBox="0 0 200 91" class="Icon ZhihuLogo ZhihuLogo--blue Icon--logo" style="height:30px;width:64px" width="64" height="30" aria-hidden="true"><title></title><g><path d="M53.29 80.035l7.32.002 2.41 8.24 13.128-8.24h15.477v-67.98H53.29v67.978zm7.79-60.598h22.756v53.22h-8.73l-8.718 5.473-1.587-5.46-3.72-.012v-53.22zM46.818 43.162h-16.35c.545-8.467.687-16.12.687-22.955h15.987s.615-7.05-2.68-6.97H16.807c1.09-4.1 2.46-8.332 4.1-12.708 0 0-7.523 0-10.085 6.74-1.06 2.78-4.128 13.48-9.592 24.41 1.84-.2 7.927-.37 11.512-6.94.66-1.84.785-2.08 1.605-4.54h9.02c0 3.28-.374 20.9-.526 22.95H6.51c-3.67 0-4.863 7.38-4.863 7.38H22.14C20.765 66.11 13.385 79.24 0 89.62c6.403 1.828 12.784-.29 15.937-3.094 0 0 7.182-6.53 11.12-21.64L43.92 85.18s2.473-8.402-.388-12.496c-2.37-2.788-8.768-10.33-11.496-13.064l-4.57 3.627c1.363-4.368 2.183-8.61 2.46-12.71H49.19s-.027-7.38-2.372-7.38zm128.752-.502c6.51-8.013 14.054-18.302 14.054-18.302s-5.827-4.625-8.556-1.27c-1.874 2.548-11.51 15.063-11.51 15.063l6.012 4.51zm-46.903-18.462c-2.814-2.577-8.096.667-8.096.667s12.35 17.2 12.85 17.953l6.08-4.29s-8.02-11.752-10.83-14.33zM199.99 46.5c-6.18 0-40.908.292-40.953.292v-31.56c1.503 0 3.882-.124 7.14-.376 12.773-.753 21.914-1.25 27.427-1.504 0 0 3.817-8.496-.185-10.45-.96-.37-7.24 1.43-7.24 1.43s-51.63 5.153-72.61 5.64c.5 2.756 2.38 5.336 4.93 6.11 4.16 1.087 7.09.53 15.36.277 7.76-.5 13.65-.76 17.66-.76v31.19h-41.71s.88 6.97 7.97 7.14h33.73v22.16c0 4.364-3.498 6.87-7.65 6.6-4.4.034-8.15-.36-13.027-.566.623 1.24 1.977 4.496 6.035 6.824 3.087 1.502 5.054 2.053 8.13 2.053 9.237 0 14.27-5.4 14.027-14.16V53.93h38.235c3.026 0 2.72-7.432 2.72-7.432z" fill-rule="evenodd"></path></g></svg></a><i class="ColumnPageHeader-Line"></i><div class="ColumnPageHeader-Title"><a class="ColumnLink ColumnPageHeader-Link" href="https://zhuanlan.zhihu.com/codehole"><img class="Avatar Avatar--round" width="30" height="30" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-242e1c8843659a1a0d6c580c5287c609_is.jpg" srcset="https://pic4.zhimg.com/v2-242e1c8843659a1a0d6c580c5287c609_im.jpg 2x" alt="码洞"></a><div class="ColumnPageHeader-TitleName"><span class="ColumnPageHeader-TitleMeta">首发于</span><a class="ColumnLink ColumnPageHeader-TitleColumn" href="https://zhuanlan.zhihu.com/codehole">码洞</a></div></div><div class="ColumnPageHeader-Button"><button type="button" class="Button FollowButton ColumnPageHeader-FollowButton Button--primary Button--blue">关注专栏</button><button type="button" class="Button ColumnPageHeader-WriteButton Button--blue"><svg class="Zi Zi--EditSurround" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"></path></svg>写文章</button><div class="Popover"><button title="更多" type="button" id="Popover1-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover1-content" class="Button ColumnPageHeader-MenuToggler Button--plain"><svg class="Zi Zi--Dots" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></button></div></div></div></div><div class="Sticky--holder" style="position: relative; top: 0px; right: 0px; bottom: 0px; left: 0px; display: block; float: none; margin: 0px; height: 51.9886px;"></div></div></div><img class="TitleImage" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-09c3b95189b59c5acd7a96250a355b52_1200x500.jpg" alt="老大难的 Java ClassLoader 再不理解就老了"><article class="Post-Main Post-NormalMain"><header class="Post-Header"><h1 class="Post-Title">老大难的 Java ClassLoader 再不理解就老了</h1><div class="Post-Author"><div class="AuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="老钱"><meta itemprop="image" content="https://pic3.zhimg.com/v2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg"><meta itemprop="url" content="https://www.zhihu.com/people/codehole"><meta itemprop="zhihu:followerCount"><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover2-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover2-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/codehole"><img class="Avatar Avatar--round AuthorInfo-avatar" width="38" height="38" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-3752c90e84b5e5402cadf6e05aa014fc_xs.jpg" srcset="https://pic3.zhimg.com/v2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg 2x" alt="老钱"></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover3-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover3-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/codehole">老钱</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="RichText ztext AuthorInfo-badgeText">Good news everyone!</div></div></div></div></div><button type="button" class="Button FollowButton Button--primary Button--grey">已关注</button></div><div class="Labels"><div class="Labels-item"></div></div><div><span class="Voters"><button type="button" class="Button Button--plain">123 人<!-- -->赞了该文章</button></span></div></header><div><div class="RichText ztext Post-RichText"><p>ClassLoader 是 Java 届最为神秘的技术之一，无数人被它伤透了脑筋，摸不清门道究竟在哪里。网上的文章也是一篇又一篇，经过本人的亲自鉴定，绝大部分内容都是在误导别人。本文我带读者彻底吃透 ClassLoader，以后其它的相关文章你们可以不必再细看了。</p><h2><b>ClassLoader 做什么的？</b></h2><p>顾名思义，它是用来加载 Class 的。它负责将 Class 的字节码形式转换成内存形式的 Class 对象。字节码可以来自于磁盘文件 *.class，也可以是 jar 包里的 *.class，也可以来自远程服务器提供的字节流，字节码的本质就是一个字节数组 []byte，它有特定的复杂的内部格式。</p><figure><noscript>&lt;img src="https://pic3.zhimg.com/v2-a0cacd578df9f00e486f3f34ed77a9f2_b.jpg" data-caption="" data-size="normal" data-rawwidth="599" data-rawheight="117" class="origin_image zh-lightbox-thumb" width="599" data-original="https://pic3.zhimg.com/v2-a0cacd578df9f00e486f3f34ed77a9f2_r.jpg"&gt;</noscript><img src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-a0cacd578df9f00e486f3f34ed77a9f2_hd.jpg" data-caption="" data-size="normal" data-rawwidth="599" data-rawheight="117" class="origin_image zh-lightbox-thumb lazy" width="599" data-original="https://pic3.zhimg.com/v2-a0cacd578df9f00e486f3f34ed77a9f2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-a0cacd578df9f00e486f3f34ed77a9f2_b.jpg"></figure><p>有很多字节码加密技术就是依靠定制 ClassLoader 来实现的。先使用工具对字节码文件进行加密，运行时使用定制的 ClassLoader 先解密文件内容再加载这些解密后的字节码。</p><p>每个 Class 对象的内部都有一个 classLoader 字段来标识自己是由哪个 ClassLoader 加载的。ClassLoader 就像一个容器，里面装了很多已经加载的 Class 对象。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="kd">class</span> <span class="nc">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">ClassLoader</span> <span class="n">classLoader</span><span class="o">;</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div><p><br></p><h2><b>延迟加载</b></h2><p>JVM 运行并不是一次性加载所需要的全部类的，它是按需加载，也就是延迟加载。程序在运行的过程中会逐渐遇到很多不认识的新类，这时候就会调用 ClassLoader 来加载这些类。加载完成后就会将 Class 对象存在 ClassLoader 里面，下次就不需要重新加载了。</p><p>比如你在调用某个类的静态方法时，首先这个类肯定是需要被加载的，但是并不会触及这个类的实例字段，那么实例字段的类别 Class 就可以暂时不必去加载，但是它可能会加载静态字段相关的类别，因为静态方法会访问静态字段。而实例字段的类别需要等到你实例化对象的时候才可能会加载。</p><h2><b>各司其职</b></h2><p>JVM 运行实例中会存在多个 ClassLoader，不同的 ClassLoader 会从不同的地方加载字节码文件。它可以从不同的文件目录加载，也可以从不同的 jar 文件中加载，也可以从网络上不同的服务地址来加载。</p><p>JVM 中内置了三个重要的 ClassLoader，分别是 BootstrapClassLoader、ExtensionClassLoader 和 AppClassLoader。</p><p>BootstrapClassLoader 负责加载 JVM 运行时核心类，这些类位于 JAVA_HOME/lib/rt.jar 文件中，我们常用内置库 java.xxx.* 都在里面，比如 java.util.*、java.io.*、java.nio.*、java.lang.* 等等。这个 ClassLoader 比较特殊，它是由 C 代码实现的，我们将它称之为「根加载器」。</p><p>ExtensionClassLoader 负责加载 JVM 扩展类，比如 swing 系列、内置的 js 引擎、xml 解析器 等等，这些库名通常以 javax 开头，它们的 jar 包位于 JAVA_HOME/lib/ext/*.jar 中，有很多 jar 包。</p><p>AppClassLoader 才是直接面向我们用户的加载器，它会加载 Classpath 环境变量里定义的路径中的 jar 包和目录。我们自己编写的代码以及使用的第三方 jar 包通常都是由它来加载的。</p><p>那些位于网络上静态文件服务器提供的 jar 包和 class文件，jdk 内置了一个 URLClassLoader，用户只需要传递规范的网络路径给构造器，就可以使用 URLClassLoader 来加载远程类库了。URLClassLoader 不但可以加载远程类库，还可以加载本地路径的类库，取决于构造器中不同的地址形式。ExtensionClassLoader 和 AppClassLoader 都是 URLClassLoader 的子类，它们都是从本地文件系统里加载类库。</p><p>AppClassLoader 可以由 ClassLoader 类提供的静态方法 getSystemClassLoader() 得到，它就是我们所说的「系统类加载器」，我们用户平时编写的类代码通常都是由它加载的。当我们的 main 方法执行的时候，这第一个用户类的加载器就是 AppClassLoader。</p><h2><b>ClassLoader 传递性</b></h2><p>程序在运行过程中，遇到了一个未知的类，它会选择哪个 ClassLoader 来加载它呢？虚拟机的策略是使用调用者 Class 对象的 ClassLoader 来加载当前未知的类。何为调用者 Class 对象？就是在遇到这个未知的类时，虚拟机肯定正在运行一个方法调用（静态方法或者实例方法），这个方法挂在哪个类上面，那这个类就是调用者 Class 对象。前面我们提到每个 Class 对象里面都有一个 classLoader 属性记录了当前的类是由谁来加载的。</p><p>因为 ClassLoader 的传递性，所有延迟加载的类都会由初始调用 main 方法的这个 ClassLoader 全全负责，它就是 AppClassLoader。</p><h2><b>双亲委派</b></h2><p>前面我们提到 AppClassLoader 只负责加载 Classpath 下面的类库，如果遇到没有加载的系统类库怎么办，AppClassLoader 必须将系统类库的加载工作交给 BootstrapClassLoader 和 ExtensionClassLoader 来做，这就是我们常说的「双亲委派」。</p><figure><noscript>&lt;img src="https://pic4.zhimg.com/v2-6d038f875790e1cdbf17a9aac11961e3_b.jpg" data-caption="" data-size="normal" data-rawwidth="375" data-rawheight="373" class="content_image" width="375"&gt;</noscript><span><div class="VagueImage content_image" data-src="https://pic4.zhimg.com/80/v2-6d038f875790e1cdbf17a9aac11961e3_hd.jpg" style="width: 375px; height: 373px;"><div class="VagueImage-mask is-active"></div></div></span></figure><p>AppClassLoader 在加载一个未知的类名时，它并不是立即去搜寻 Classpath，它会首先将这个类名称交给 ExtensionClassLoader 来加载，如果 ExtensionClassLoader 可以加载，那么 AppClassLoader 就不用麻烦了。否则它就会搜索 Classpath 。</p><p>而 ExtensionClassLoader 在加载一个未知的类名时，它也并不是立即搜寻 ext 路径，它会首先将类名称交给 BootstrapClassLoader 来加载，如果 BootstrapClassLoader 可以加载，那么 ExtensionClassLoader 也就不用麻烦了。否则它就会搜索 ext 路径下的 jar 包。</p><p>这三个 ClassLoader 之间形成了级联的父子关系，每个 ClassLoader 都很懒，尽量把工作交给父亲做，父亲干不了了自己才会干。每个 ClassLoader 对象内部都会有一个 parent 属性指向它的父加载器。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="kd">class</span> <span class="nc">ClassLoader</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">ClassLoader</span> <span class="n">parent</span><span class="o">;</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div><p>值得注意的是图中的 ExtensionClassLoader 的 parent 指针画了虚线，这是因为它的 parent 的值是 null，当 parent 字段是 null 时就表示它的父加载器是「根加载器」。如果某个 Class 对象的 classLoader 属性值是 null，那么就表示这个类也是「根加载器」加载的。</p><h2><b>Class.forName</b></h2><p>当我们在使用 jdbc 驱动时，经常会使用 Class.forName 方法来动态加载驱动类。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.cj.jdbc.Driver"</span><span class="o">);</span>
</code></pre></div><p>其原理是 mysql 驱动的 Driver 类里有一个静态代码块，它会在 Driver 类被加载的时候执行。这个静态代码块会将 mysql 驱动实例注册到全局的 jdbc 驱动管理器里。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="kd">class</span> <span class="nc">Driver</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
       <span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">DriverManager</span><span class="o">.</span><span class="na">registerDriver</span><span class="o">(</span><span class="k">new</span> <span class="n">Driver</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SQLException</span> <span class="n">E</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">"Can't register driver!"</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div><p>forName 方法同样也是使用调用者 Class 对象的 ClassLoader 来加载目标类。不过 forName 还提供了多参数版本，可以指定使用哪个 ClassLoader 来加载</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">forName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">initialize</span><span class="o">,</span> <span class="n">ClassLoader</span> <span class="n">cl</span><span class="o">)</span>
</code></pre></div><p>通过这种形式的 forName 方法可以突破内置加载器的限制，通过使用自定类加载器允许我们自由加载其它任意来源的类库。根据 ClassLoader 的传递性，目标类库传递引用到的其它类库也将会使用自定义加载器加载。</p><h2><b>自定义加载器</b></h2><p>ClassLoader 里面有三个重要的方法 loadClass()、findClass() 和 defineClass()。</p><p>loadClass() 方法是加载目标类的入口，它首先会查找当前 ClassLoader 以及它的双亲里面是否已经加载了目标类，如果没有找到就会让双亲尝试加载，如果双亲都加载不了，就会调用 findClass() 让自定义加载器自己来加载目标类。ClassLoader 的 findClass() 方法是需要子类来覆盖的，不同的加载器将使用不同的逻辑来获取目标类的字节码。拿到这个字节码之后再调用 defineClass() 方法将字节码转换成 Class 对象。下面我使用伪代码表示一下基本过程</p><div class="highlight"><pre><code class="language-java"><span></span><span class="kd">class</span> <span class="nc">ClassLoader</span> <span class="o">{</span>

  <span class="c1">// 加载入口，定义了双亲委派规则</span>
  <span class="n">Class</span> <span class="nf">loadClass</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 是否已经加载了</span>
    <span class="n">Class</span> <span class="n">t</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">findFromLoaded</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="k">if</span><span class="o">(</span><span class="n">t</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// 交给双亲</span>
      <span class="n">t</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">loadClass</span><span class="o">(</span><span class="n">name</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">t</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// 双亲都不行，只能靠自己了</span>
      <span class="n">t</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">findClass</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">t</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// 交给子类自己去实现</span>
  <span class="n">Class</span> <span class="nf">findClass</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="n">ClassNotFoundException</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="c1">// 组装Class对象</span>
  <span class="n">Class</span> <span class="nf">defineClass</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">code</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">buildClassFromCode</span><span class="o">(</span><span class="n">code</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">CustomClassLoader</span> <span class="kd">extends</span> <span class="n">ClassLoader</span> <span class="o">{</span>

  <span class="n">Class</span> <span class="nf">findClass</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 寻找字节码</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">code</span> <span class="o">=</span> <span class="n">findCodeFromSomewhere</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="c1">// 组装Class对象</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">defineClass</span><span class="o">(</span><span class="n">code</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>自定义类加载器不易破坏双亲委派规则，不要轻易覆盖 loadClass 方法。否则可能会导致自定义加载器无法加载内置的核心类库。在使用自定义加载器时，要明确好它的父加载器是谁，将父加载器通过子类的构造器传入。如果父类加载器是 null，那就表示父加载器是「根加载器」。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="c1">// ClassLoader 构造器</span>
<span class="kd">protected</span> <span class="nf">ClassLoader</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">ClassLoader</span> <span class="n">parent</span><span class="o">);</span>
</code></pre></div><p>双亲委派规则可能会变成三亲委派，四亲委派，取决于你使用的父加载器是谁，它会一直递归委派到根加载器。</p><h2><b>Class.forName vs ClassLoader.loadClass</b></h2><p>这两个方法都可以用来加载目标类，它们之间有一个小小的区别，那就是 Class.forName() 方法可以获取原生类型的 Class，而 ClassLoader.loadClass() 则会报错。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"[I"</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">ClassLoader</span><span class="o">.</span><span class="na">getSystemClassLoader</span><span class="o">().</span><span class="na">loadClass</span><span class="o">(</span><span class="s">"[I"</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>

<span class="o">---------------------</span>
<span class="kd">class</span> <span class="err">[</span><span class="nc">I</span>

<span class="n">Exception</span> <span class="n">in</span> <span class="n">thread</span> <span class="s">"main"</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">ClassNotFoundException</span><span class="o">:</span> <span class="o">[</span><span class="n">I</span>
<span class="o">...</span>
</code></pre></div><h2><b>钻石依赖</b></h2><p>项目管理上有一个著名的概念叫着「钻石依赖」，是指软件依赖导致同一个软件包的两个版本需要共存而不能冲突。<br></p><figure><noscript>&lt;img src="https://pic4.zhimg.com/v2-7a471cc06fd74bb65984647dbe621a8f_b.jpg" data-caption="" data-size="normal" data-rawwidth="606" data-rawheight="298" class="origin_image zh-lightbox-thumb" width="606" data-original="https://pic4.zhimg.com/v2-7a471cc06fd74bb65984647dbe621a8f_r.jpg"&gt;</noscript><span><div class="VagueImage origin_image zh-lightbox-thumb" data-src="https://pic4.zhimg.com/80/v2-7a471cc06fd74bb65984647dbe621a8f_hd.jpg" style="width: 605.994px; height: 297.997px;"><div class="VagueImage-mask is-active"></div></div></span></figure><p><br></p><p>我们平时使用的 maven 是这样解决钻石依赖的，它会从多个冲突的版本中选择一个来使用，如果不同的版本之间兼容性很糟糕，那么程序将无法正常编译运行。Maven 这种形式叫「扁平化」依赖管理。</p><p><br></p><p>使用 ClassLoader 可以解决钻石依赖问题。不同版本的软件包使用不同的 ClassLoader 来加载，<b>位于不同 ClassLoader 中名称一样的类实际上是不同的类</b>。下面让我们使用 URLClassLoader 来尝试一个简单的例子，它默认的父加载器是 AppClassLoader</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">$</span> <span class="n">cat</span> <span class="o">~/</span><span class="n">source</span><span class="o">/</span><span class="n">jcl</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">Dep</span><span class="o">.</span><span class="na">java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Dep</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"v1"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">$</span> <span class="n">cat</span> <span class="o">~/</span><span class="n">source</span><span class="o">/</span><span class="n">jcl</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">Dep</span><span class="o">.</span><span class="na">java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Dep</span> <span class="o">{</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"v1"</span><span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>

<span class="n">$</span> <span class="n">cat</span> <span class="o">~/</span><span class="n">source</span><span class="o">/</span><span class="n">jcl</span><span class="o">/</span><span class="n">Test</span><span class="o">.</span><span class="na">java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">v1dir</span> <span class="o">=</span> <span class="s">"file:///Users/qianwp/source/jcl/v1/"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">v2dir</span> <span class="o">=</span> <span class="s">"file:///Users/qianwp/source/jcl/v2/"</span><span class="o">;</span>
        <span class="n">URLClassLoader</span> <span class="n">v1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URLClassLoader</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">[]{</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">v1dir</span><span class="o">)});</span>
        <span class="n">URLClassLoader</span> <span class="n">v2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URLClassLoader</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">[]{</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">v2dir</span><span class="o">)});</span>

        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">depv1Class</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="na">loadClass</span><span class="o">(</span><span class="s">"Dep"</span><span class="o">);</span>
        <span class="n">Object</span> <span class="n">depv1</span> <span class="o">=</span> <span class="n">depv1Class</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">().</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="n">depv1Class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"print"</span><span class="o">).</span><span class="na">invoke</span><span class="o">(</span><span class="n">depv1</span><span class="o">);</span>

        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">depv2Class</span> <span class="o">=</span> <span class="n">v2</span><span class="o">.</span><span class="na">loadClass</span><span class="o">(</span><span class="s">"Dep"</span><span class="o">);</span>
        <span class="n">Object</span> <span class="n">depv2</span> <span class="o">=</span> <span class="n">depv2Class</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">().</span><span class="na">newInstance</span><span class="o">();</span>
        <span class="n">depv2Class</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"print"</span><span class="o">).</span><span class="na">invoke</span><span class="o">(</span><span class="n">depv2</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">depv1Class</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">depv2Class</span><span class="o">));</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>在运行之前，我们需要对依赖的类库进行编译</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">$</span> <span class="n">cd</span> <span class="o">~/</span><span class="n">source</span><span class="o">/</span><span class="n">jcl</span><span class="o">/</span><span class="n">v1</span>
<span class="n">$</span> <span class="n">javac</span> <span class="n">Dep</span><span class="o">.</span><span class="na">java</span>
<span class="n">$</span> <span class="n">cd</span> <span class="o">~/</span><span class="n">source</span><span class="o">/</span><span class="n">jcl</span><span class="o">/</span><span class="n">v2</span>
<span class="n">$</span> <span class="n">javac</span> <span class="n">Dep</span><span class="o">.</span><span class="na">java</span>
<span class="n">$</span> <span class="n">cd</span> <span class="o">~/</span><span class="n">source</span><span class="o">/</span><span class="n">jcl</span>
<span class="n">$</span> <span class="n">javac</span> <span class="n">Test</span><span class="o">.</span><span class="na">java</span>
<span class="n">$</span> <span class="n">java</span> <span class="n">Test</span>
<span class="n">v1</span>
<span class="n">v2</span>
<span class="kc">false</span>
</code></pre></div><p>在这个例子中如果两个 URLClassLoader 指向的路径是一样的，下面这个表达式还是 false，因为即使是同样的字节码用不同的 ClassLoader 加载出来的类都不能算同一个类</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">depv1Class</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">depv2Class</span><span class="o">)</span>
</code></pre></div><p>我们还可以让两个不同版本的 Dep 类实现同一个接口，这样可以避免使用反射的方式来调用 Dep 类里面的方法。</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">depv1Class</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="na">loadClass</span><span class="o">(</span><span class="s">"Dep"</span><span class="o">);</span>
<span class="n">IPrint</span> <span class="n">depv1</span> <span class="o">=</span> <span class="o">(</span><span class="n">IPrint</span><span class="o">)</span><span class="n">depv1Class</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">().</span><span class="na">newInstance</span><span class="o">();</span>
<span class="n">depv1</span><span class="o">.</span><span class="na">print</span><span class="o">()</span>
</code></pre></div><p>ClassLoader 固然可以解决依赖冲突问题，不过它也限制了不同软件包的操作界面必须使用反射或接口的方式进行动态调用。Maven 没有这种限制，它依赖于虚拟机的默认懒惰加载策略，运行过程中如果没有显示使用定制的 ClassLoader，那么从头到尾都是在使用 AppClassLoader，而不同版本的同名类必须使用不同的 ClassLoader 加载，所以 Maven 不能完美解决钻石依赖。<br>如果你想知道有没有开源的包管理工具可以解决钻石依赖的，我推荐你了解一下 sofa-ark，它是蚂蚁金服开源的轻量级类隔离框架。</p><h2><b>分工与合作</b></h2><p>这里我们重新理解一下 ClassLoader 的意义，它相当于类的命名空间，起到了类隔离的作用。位于同一个 ClassLoader 里面的类名是唯一的，不同的 ClassLoader 可以持有同名的类。ClassLoader 是类名称的容器，是类的沙箱。<br></p><figure><noscript>&lt;img src="https://pic3.zhimg.com/v2-354fd6b023feddff14f90b0eeb8181aa_b.jpg" data-caption="" data-size="normal" data-rawwidth="1152" data-rawheight="1052" class="origin_image zh-lightbox-thumb" width="1152" data-original="https://pic3.zhimg.com/v2-354fd6b023feddff14f90b0eeb8181aa_r.jpg"&gt;</noscript><span><div class="VagueImage origin_image zh-lightbox-thumb" data-src="https://pic3.zhimg.com/80/v2-354fd6b023feddff14f90b0eeb8181aa_hd.jpg" style="width: 690px; height: 630.104px;"><div class="VagueImage-mask is-active"></div></div></span></figure><p><br></p><p>不同的 ClassLoader 之间也会有合作，它们之间的合作是通过 parent 属性和双亲委派机制来完成的。parent 具有更高的加载优先级。除此之外，parent 还表达了一种共享关系，当多个子 ClassLoader 共享同一个 parent 时，那么这个 parent 里面包含的类可以认为是所有子 ClassLoader 共享的。这也是为什么 BootstrapClassLoader 被所有的类加载器视为祖先加载器，JVM 核心类库自然应该被共享。</p><p><br></p><h2><b>Thread.contextClassLoader</b></h2><p>如果你稍微阅读过 Thread 的源代码，你会在它的实例字段中发现有一个字段非常特别</p><div class="highlight"><pre><code class="language-java"><span></span><span class="kd">class</span> <span class="nc">Thread</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="kd">private</span> <span class="n">ClassLoader</span> <span class="n">contextClassLoader</span><span class="o">;</span>

  <span class="kd">public</span> <span class="n">ClassLoader</span> <span class="nf">getContextClassLoader</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">contextClassLoader</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContextClassLoader</span><span class="o">(</span><span class="n">ClassLoader</span> <span class="n">cl</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">contextClassLoader</span> <span class="o">=</span> <span class="n">cl</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div><p>contextClassLoader「线程上下文类加载器」，这究竟是什么东西？</p><p>首先 contextClassLoader 是那种需要显示使用的类加载器，如果你没有显示使用它，也就永远不会在任何地方用到它。你可以使用下面这种方式来显示使用它</p><div class="highlight"><pre><code class="language-java"><span></span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getContextClassLoader</span><span class="o">().</span><span class="na">loadClass</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</code></pre></div><p>这意味着如果你使用 forName(string name) 方法加载目标类，它不会自动使用 contextClassLoader。那些因为代码上的依赖关系而懒惰加载的类也不会自动使用 contextClassLoader来加载。</p><p>其次线程的 contextClassLoader 是从父线程那里继承过来的，所谓父线程就是创建了当前线程的线程。程序启动时的 main 线程的 contextClassLoader 就是 AppClassLoader。这意味着如果没有人工去设置，那么所有的线程的 contextClassLoader 都是 AppClassLoader。</p><p>那这个 contextClassLoader 究竟是做什么用的？我们要使用前面提到了类加载器分工与合作的原理来解释它的用途。</p><p>它可以做到跨线程共享类，只要它们共享同一个 contextClassLoader。父子线程之间会自动传递 contextClassLoader，所以共享起来将是自动化的。</p><p>如果不同的线程使用不同的 contextClassLoader，那么不同的线程使用的类就可以隔离开来。</p><p>如果我们对业务进行划分，不同的业务使用不同的线程池，线程池内部共享同一个 contextClassLoader，线程池之间使用不同的 contextClassLoader，就可以很好的起到隔离保护的作用，避免类版本冲突。</p><p>如果我们不去定制 contextClassLoader，那么所有的线程将会默认使用 AppClassLoader，所有的类都将会是共享的。</p><p>线程的 contextClassLoader 使用场合比较罕见，如果上面的逻辑晦涩难懂也不必过于计较。</p><p>JDK9 增加了模块功能之后对类加载器的结构设计做了一定程度的修改，不过类加载器的原理还是类似的，作为类的容器，它起到类隔离的作用，同时还需要依靠双亲委派机制来建立不同的类加载器之间的合作关系。</p><figure><noscript>&lt;img src="https://pic2.zhimg.com/v2-f25a51200e4670e3e42fdd0a7a209d8d_b.jpg" data-caption="" data-size="normal" data-rawwidth="468" data-rawheight="189" class="origin_image zh-lightbox-thumb" width="468" data-original="https://pic2.zhimg.com/v2-f25a51200e4670e3e42fdd0a7a209d8d_r.jpg"&gt;</noscript><span><div class="VagueImage origin_image zh-lightbox-thumb" data-src="https://pic2.zhimg.com/80/v2-f25a51200e4670e3e42fdd0a7a209d8d_hd.jpg" style="width: 467.997px; height: 188.999px;"><div class="VagueImage-mask is-active"></div></div></span></figure><p>阅读更多精品文章，微信扫一扫上面的二维码关注公众号「码洞」</p></div></div><div class="ContentItem-time">编辑于昨天 15:43</div><div class="Post-topicsAndReviewer"><div class="TopicList Post-Topics"><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19561132&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19561132" target="_blank"><div class="Popover"><div id="Popover4-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover4-content">Java</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19582744&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19582744" target="_blank"><div class="Popover"><div id="Popover5-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover5-content">Java 编程</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;20229458&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/20229458" target="_blank"><div class="Popover"><div id="Popover6-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover6-content">Java类加载机制</div></div></a></span></div></div></div><div><div class="Sticky RichContent-actions is-fixed is-bottom" style="width: 690px; bottom: 0px; left: 301.818px;"><div class="ContentItem-actions" data-za-detail-view-path-module="BottomBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;id&quot;:&quot;51374915&quot;}}}"><span><button aria-label="赞同" type="button" class="Button VoteButton VoteButton--up is-active"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>已赞同 <!-- -->123</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button BottomActions-CommentBtn Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>8 条评论</button><div class="Popover ShareMenu"><div class="" id="Popover7-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover7-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><div class="Post-ActionMenuButton"><div class="Popover"><div id="Popover8-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover8-content"><button type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div><div data-za-detail-view-path-module="LeftTabBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;id&quot;:&quot;51374915&quot;}}}"><div><div class="Post-SideActions" style="opacity: 1;"><button class="like active"><div class="Post-SideActions-icon"><svg class="Zi Zi--TriangleUp Post-SideActions-upIcon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></div><div class="likeCount"><div class="likeCount-inner" data-previous="赞同 122">已赞同 123</div></div></button><div class="Popover ShareMenu"><div class="" id="Popover18-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover18-content"><button><div class="Post-SideActions-icon"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Share" fill="currentColor" viewBox="0 0 24 24" width="20" height="20"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span></div>分享</button></div></div></div></div></div></div><div class="Sticky--holder" style="position: static; top: auto; right: auto; bottom: 0px; left: 0px; display: block; float: none; margin: 0px 0px 10px; height: 53.6222px;"></div></div><div class="PostIndex-Contributes" data-za-detail-view-path-module="ColumnList" data-za-detail-view-path-module_name="文章被以下专栏收录" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:null}}"><h3 class="BlockTitle">文章被以下专栏收录</h3><ul><div class="ContentItem Column-ColumnItem"><div class="ContentItem-main"><div class="ContentItem-image"><a class="ColumnLink" href="https://zhuanlan.zhihu.com/codehole"><div class="Popover"><div id="Popover9-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover9-content"><img class="Avatar Avatar--medium Avatar--round" width="40" height="40" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-242e1c8843659a1a0d6c580c5287c609_xs.jpg" srcset="https://pic4.zhimg.com/v2-242e1c8843659a1a0d6c580c5287c609_l.jpg 2x" alt="码洞"></div></div></a></div><div class="ContentItem-head"><h2 class="ContentItem-title"><a class="ColumnLink ColumnItem-Title" href="https://zhuanlan.zhihu.com/codehole"><div class="Popover"><div id="Popover10-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover10-content">码洞</div></div></a></h2><div class="ContentItem-meta">Good news everyone!</div></div><div class="ContentItem-extra"><button type="button" class="Button FollowButton Button--primary Button--blue">关注专栏</button></div></div></div><div class="ContentItem Column-ColumnItem"><div class="ContentItem-main"><div class="ContentItem-image"><a class="ColumnLink" href="https://zhuanlan.zhihu.com/beautifuljava"><div class="Popover"><div id="Popover11-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover11-content"><img class="Avatar Avatar--medium Avatar--round" width="40" height="40" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-707b9f4aafeac8fc25d2e1e64252ce93_xs.jpg" srcset="https://pic4.zhimg.com/v2-707b9f4aafeac8fc25d2e1e64252ce93_l.jpg 2x" alt="Beautiful Java"></div></div></a></div><div class="ContentItem-head"><h2 class="ContentItem-title"><a class="ColumnLink ColumnItem-Title" href="https://zhuanlan.zhihu.com/beautifuljava"><div class="Popover"><div id="Popover12-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover12-content">Beautiful Java</div></div></a></h2><div class="ContentItem-meta">一个分享Java知识干货的专栏，内容涵盖Java SE、Spring、JVM调优等领域的知识。同时这也是一本帮助你写出优雅的Java代码，拥有美丽的编程心情的Java修炼手册。</div></div><div class="ContentItem-extra"><button type="button" class="Button FollowButton Button--primary Button--blue">关注专栏</button></div></div></div><div class="ContentItem Column-ColumnItem"><div class="ContentItem-main"><div class="ContentItem-image"><a class="ColumnLink" href="https://zhuanlan.zhihu.com/hinus"><div class="Popover"><div id="Popover13-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover13-content"><img class="Avatar Avatar--medium Avatar--round" width="40" height="40" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-5dc79b8531008b2bece655aabd627941_xs.jpg" srcset="https://pic1.zhimg.com/v2-5dc79b8531008b2bece655aabd627941_l.jpg 2x" alt="进击的Java新人"></div></div></a></div><div class="ContentItem-head"><h2 class="ContentItem-title"><a class="ColumnLink ColumnItem-Title" href="https://zhuanlan.zhihu.com/hinus"><div class="Popover"><div id="Popover14-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover14-content">进击的Java新人</div></div></a></h2></div><div class="ContentItem-extra"><button type="button" class="Button FollowButton Button--primary Button--grey">已关注</button></div></div></div></ul></div><div class="Recommendations-Main" style="width: 1294px;"><h3 class="BlockTitle Recommendations-BlockTitle">推荐阅读</h3><ul class="Recommendations-List"><button class="PagingButton PagingButton-Previous" disabled=""><svg class="Zi Zi--ArrowLeft" fill="#d3d3d3" viewBox="0 0 24 24" width="40" height="40"><path d="M14.782 16.78a.737.737 0 0 1-1.052 0L9.218 12.53a.758.758 0 0 1 0-1.063L13.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L11 12l3.782 3.716c.29.294.29.77 0 1.063z" fill-rule="evenodd"></path></svg></button><a href="https://zhuanlan.zhihu.com/p/37900981" class="PostItem"><div><img src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-e7dde16d3730d16e858f84e4b513474e_250x0.jpg" srcset="https://pic3.zhimg.com/v2-e7dde16d3730d16e858f84e4b513474e_qhd.jpg 2x" class="PostItem-TitleImage" alt="C#与Java的对决！"><h1 class="PostItem-Title">C#与Java的对决！</h1><div class="PostItem-Footer"><span>6号咸鱼</span><span class="PostItem-FooterTitle">发表于.NET ...</span></div></div></a><a href="https://zhuanlan.zhihu.com/p/45695413" class="PostItem"><div><img src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-0024e25541bfa56d6ba1f88a671d63d6_250x0.jpg" srcset="https://pic3.zhimg.com/v2-0024e25541bfa56d6ba1f88a671d63d6_qhd.jpg 2x" class="PostItem-TitleImage" alt="我的 Java 学习之路"><h1 class="PostItem-Title">我的 Java 学习之路</h1><div class="PostItem-Footer"><span>wistbean</span><span class="PostItem-FooterTitle"></span></div></div></a><a href="https://zhuanlan.zhihu.com/p/50095075" class="PostItem"><div><img src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-b9c99023ba45658e15c5676ba97e6fcc_250x0.jpg" srcset="https://pic4.zhimg.com/v2-b9c99023ba45658e15c5676ba97e6fcc_qhd.jpg 2x" class="PostItem-TitleImage" alt="IntelliJ IDEA 最常用配置，应用、永久激活"><h1 class="PostItem-Title">IntelliJ IDEA 最常用配置，应用、永久激活</h1><div class="PostItem-Footer"><span>慕课网</span><span class="PostItem-FooterTitle">发表于猿论</span></div></div></a><a href="https://zhuanlan.zhihu.com/p/35382932" class="PostItem"><div><img src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-5a72a1af65849540acfc5145a7d43da6_250x0.jpg" srcset="https://pic1.zhimg.com/v2-5a72a1af65849540acfc5145a7d43da6_qhd.jpg 2x" class="PostItem-TitleImage" alt="如何学习Java多线程"><h1 class="PostItem-Title">如何学习Java多线程</h1><div class="PostItem-Footer"><span>柳树</span><span class="PostItem-FooterTitle">发表于Beaut...</span></div></div></a><button class="PagingButton PagingButton-Next"><svg class="Zi Zi--ArrowRight" fill="#d3d3d3" viewBox="0 0 24 24" width="40" height="40"><path d="M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z" fill-rule="evenodd"></path></svg></button></ul></div><div class="Comments-container" data-za-detail-view-path-module="CommentList" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:null}}"><div class="CommentsV2 CommentsV2--withEditor CommentsV2-withPagination"><div class="Topbar CommentTopbar"><div class="Topbar-title"><h2 class="CommentTopbar-title">8 条评论</h2></div><div class="Topbar-options"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Switch Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M13.004 7V4.232c0-.405.35-.733.781-.733.183 0 .36.06.501.17l6.437 5.033c.331.26.376.722.1 1.033a.803.803 0 0 1-.601.264H2.75a.75.75 0 0 1-.75-.75V7.75A.75.75 0 0 1 2.75 7h10.254zm-1.997 9.999v2.768c0 .405-.35.733-.782.733a.814.814 0 0 1-.5-.17l-6.437-5.034a.702.702 0 0 1-.1-1.032.803.803 0 0 1 .6-.264H21.25a.75.75 0 0 1 .75.75v1.499a.75.75 0 0 1-.75.75H11.007z" fill-rule="evenodd"></path></svg></span>切换为时间排序</button></div></div><div class="CommentsV2-footer CommentEditorV2--normal"><div class="CommentEditorV2-inputWrap"><div class="CommentEditorV2-input Input-wrapper Input-wrapper--spread Input-wrapper--large Input-wrapper--noPadding"><div class="Input Editable"><div class="Dropzone RichText ztext" style="min-height: 198px;"><div class="DraftEditor-root"><div class="public-DraftEditorPlaceholder-root"><div class="public-DraftEditorPlaceholder-inner" id="placeholder-es7bb" style="white-space: pre-wrap;">写下你的评论...</div></div><div class="DraftEditor-editorContainer"><div aria-describedby="placeholder-es7bb" class="notranslate public-DraftEditor-content" contenteditable="true" role="textbox" spellcheck="true" tabindex="0" style="outline: none; user-select: text; white-space: pre-wrap; word-wrap: break-word;"><div data-contents="true"><div class="Editable-unstyled" data-block="true" data-editor="es7bb" data-offset-key="98u61-0-0"><div data-offset-key="98u61-0-0" class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr"><span data-offset-key="98u61-0-0"><br data-text="true"></span></div></div></div></div></div></div></div><input multiple="" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" style="display: none;"><div></div></div></div><div class="CommentEditorV2-inputUpload"><div class="CommentEditorV2-popoverWrap"><div class="Popover CommentEditorV2-inputUpLoad-Icon"><button aria-label="插入表情" data-tooltip="插入表情" data-tooltip-position="bottom" data-tooltip-will-hide-on-click="true" id="Popover15-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover15-content" type="button" class="Button Editable-control Button--plain"><svg class="Zi Zi--Emotion" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M7.523 13.5h8.954c-.228 2.47-2.145 4-4.477 4-2.332 0-4.25-1.53-4.477-4zM12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm-3-8a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg></button></div></div></div></div><button disabled="" type="button" class="Button CommentEditorV2-singleButton Button--primary Button--blue">发布</button></div><div><div class="CommentListV2"><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover19-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover19-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/shi-yuan-67-16"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/da8e974dc_s.jpg" srcset="https://pic4.zhimg.com/da8e974dc_xs.jpg 2x" alt="0xCAFFE"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/shi-yuan-67-16">0xCAFFE</a></span><span class="CommentItemV2-time">2 天前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext">好文！！</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover20-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover20-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/ni-ze"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/904cfd7ec_s.jpg" srcset="https://pic1.zhimg.com/904cfd7ec_xs.jpg 2x" alt="倪泽"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/ni-ze">倪泽</a></span><span class="CommentItemV2-time">2 天前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext">好有深度，赞美！</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover21-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover21-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/ding-shi-sheng-49"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-6955e775f112c06d93184afdf93b1623_s.jpg" srcset="https://pic3.zhimg.com/v2-6955e775f112c06d93184afdf93b1623_xs.jpg 2x" alt="丁一"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/ding-shi-sheng-49">丁一</a></span><span class="CommentItemV2-time">1 天前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext">这个有用</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover22-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover22-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/zhang-xing-rui-73"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-1fccac6eea8ed450624bf2bbd650b7c8_s.jpg" srcset="https://pic3.zhimg.com/v2-1fccac6eea8ed450624bf2bbd650b7c8_xs.jpg 2x" alt="张兴锐"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/zhang-xing-rui-73">张兴锐</a></span><span class="CommentItemV2-time">1 天前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext">不错</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover23-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover23-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/my-dear-suzumiya-san"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-40d52db34184001ef68c0f36a3c5ff51_s.jpg" srcset="https://pic1.zhimg.com/v2-40d52db34184001ef68c0f36a3c5ff51_xs.jpg 2x" alt="地狱少女火炮兰"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/my-dear-suzumiya-san">地狱少女火炮兰</a></span><span class="CommentItemV2-time">1 天前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext"><p>深度好文 深入浅出</p></div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover24-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover24-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/yan_m"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/v2-385302a686198506f11e69f8c0a8bd36_s.jpg" srcset="https://pic2.zhimg.com/v2-385302a686198506f11e69f8c0a8bd36_xs.jpg 2x" alt="myan"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/yan_m">myan</a></span><span class="CommentItemV2-time">1 天前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext">文章很清晰</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover25-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover25-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/kou-wen-hao-46"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/da8e974dc_s.jpg" srcset="https://pic4.zhimg.com/da8e974dc_xs.jpg 2x" alt="酸菜小牛肉"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/kou-wen-hao-46">酸菜小牛肉</a></span><span class="CommentItemV2-time">22 小时前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext">好文</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover26-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover26-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/vincentML"><img class="Avatar UserLink-avatar" width="24" height="24" src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/49c697587_s.jpg" srcset="https://pic3.zhimg.com/49c697587_xs.jpg 2x" alt="开水Vincent"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/vincentML">开水Vincent</a></span><span class="CommentItemV2-time">7 小时前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText"><div class="RichText ztext"><p>ClassLoader.loadClass()为什么不能加载原生类型的class啊</p></div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul></div><span></span></div></div></div></article></div></main><div class="CornerButtons"><div class="CornerAnimayedFlex CornerAnimayedFlex--hidden"><button data-tooltip="回到顶部" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="回到顶部" type="button" class="Button CornerButton Button--plain"><svg class="Zi Zi--BackToTop" title="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg></button></div></div></div></div><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","mainHost":"www.zhihu.com"}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"privacy":{"showPrivacy":false},"loading":{"global":{"count":0},"local":{"env\u002FgetIpinfo\u002F":false,"article\u002Fget\u002F":false,"brand\u002FgetUrl\u002F":false}},"entities":{"users":{"26a88e420afd451c2aaab55ac5747b59":{"userType":"people","uid":719475314706636800,"id":"26a88e420afd451c2aaab55ac5747b59"},"codehole":{"isFollowed":false,"name":"老钱","headline":"Good news everyone!","type":"people","userType":"people","urlToken":"codehole","url":"\u002Fpeople\u002F89ce500f3e247d730059335e09f5b99f","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg","isFollowing":true,"gender":1,"badge":[],"id":"89ce500f3e247d730059335e09f5b99f"}},"questions":{},"answers":{},"articles":{"51374915":{"trackUrl":["http:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper\u002Fpage_monitor_log?si=__SESSIONID__&ti=__ATOKEN__&at=view&pf=__OS__"],"updated":1543909396,"isLabeled":false,"topics":[{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19561132","type":"topic","id":"19561132","name":"Java"},{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19582744","type":"topic","id":"19582744","name":"Java 编程"},{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F20229458","type":"topic","id":"20229458","name":"Java类加载机制"}],"excerpt":"\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-a0cacd578df9f00e486f3f34ed77a9f2_200x112.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"599\" data-rawheight=\"117\" data-watermark=\"original\" data-original-src=\"v2-a0cacd578df9f00e486f3f34ed77a9f2\" data-watermark-src=\"v2-d23f50b534cd846ddbcf409dd4e39a0c\" data-private-watermark-src=\"\" class=\"origin_image inline-img zh-lightbox-thumb\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-a0cacd578df9f00e486f3f34ed77a9f2_r.jpg\"\u003EClassLoader 是 Java 届最为神秘的技术之一，无数人被它伤透了脑筋，摸不清门道究竟在哪里。网上的文章也是一篇又一篇，经过本人的亲自鉴定，绝大部分内容都是在误导别人。本文我带读者彻底吃透 ClassLoader，以后其它的相关文章你们可以不必再细看了。\u003Cb\u003EClas…\u003C\u002Fb\u003E","adminClosedComment":false,"canTip":false,"excerptTitle":"","contributions":[{"column":{"updated":1540874298,"description":"Good news everyone!","canManage":false,"intro":"码出个未来","isFollowing":false,"urlToken":"codehole","id":"codehole","articlesCount":99,"acceptSubmission":true,"title":"码洞","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fcodehole","commentPermission":"all","created":1514259372,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-242e1c8843659a1a0d6c580c5287c609_b.jpg","author":{"isFollowed":false,"name":"老钱","headline":"Good news everyone!","gender":1,"userType":"people","urlToken":"codehole","url":"\u002Fpeople\u002F89ce500f3e247d730059335e09f5b99f","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg","isFollowing":false,"type":"people","id":"89ce500f3e247d730059335e09f5b99f"},"followers":3328,"type":"column"},"state":"accepted","type":"first_publish","id":2606688},{"column":{"updated":1512873743,"description":"一个分享Java知识干货的专栏，内容涵盖Java SE、Spring、JVM调优等领域的知识。同时这也是一本帮助你写出优雅的Java代码，拥有美丽的编程心情的Java修炼手册。","canManage":false,"intro":"Java修炼手册，欢迎用优质文章砸我","isFollowing":false,"urlToken":"beautifuljava","id":"beautifuljava","articlesCount":63,"acceptSubmission":true,"title":"Beautiful Java","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fbeautifuljava","commentPermission":"all","created":1504259255,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-707b9f4aafeac8fc25d2e1e64252ce93_b.jpg","author":{"isFollowed":false,"name":"柳树","headline":"微信公众号 Bridge4You","gender":1,"userType":"people","urlToken":"hong-ze-yang","url":"\u002Fpeople\u002F45885a5ec948d71a917f88fe9f79e93e","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-5f8318f188a97a5845e5b2b912f1b944_l.jpg","isFollowing":false,"type":"people","id":"45885a5ec948d71a917f88fe9f79e93e"},"followers":5191,"type":"column"},"state":"accepted","type":"include","id":2610135},{"column":{"updated":1491065432,"description":"","canManage":false,"intro":"","isFollowing":true,"urlToken":"hinus","id":"hinus","articlesCount":136,"acceptSubmission":true,"title":"进击的Java新人","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fhinus","commentPermission":"all","created":1481546022,"imageUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-5dc79b8531008b2bece655aabd627941_b.jpg","author":{"isFollowed":false,"name":"海纳","headline":"罪与罚","gender":1,"userType":"people","urlToken":"hinus","url":"\u002Fpeople\u002Fa6fecae6ca1389079dbb63d0b4368eba","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-4367659cbc867e1bf7d91e93087a5b6b_l.jpg","isFollowing":false,"type":"people","id":"a6fecae6ca1389079dbb63d0b4368eba"},"followers":24194,"type":"column"},"state":"accepted","type":"include","id":2621868}],"id":51374915,"commercialInfo":{"isCommercial":false},"voteupCount":123,"upvotedFollowees":[],"titleImage":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-09c3b95189b59c5acd7a96250a355b52_b.jpg","title":"老大难的 Java ClassLoader 再不理解就老了","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F51374915","commentPermission":"all","author":{"isFollowed":false,"name":"老钱","headline":"Good news everyone!","type":"people","userType":"people","urlToken":"codehole","url":"\u002Fpeople\u002F89ce500f3e247d730059335e09f5b99f","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg","isFollowing":true,"gender":1,"badge":[],"id":"89ce500f3e247d730059335e09f5b99f"},"state":"published","created":1543738898,"content":"\u003Cp\u003EClassLoader 是 Java 届最为神秘的技术之一，无数人被它伤透了脑筋，摸不清门道究竟在哪里。网上的文章也是一篇又一篇，经过本人的亲自鉴定，绝大部分内容都是在误导别人。本文我带读者彻底吃透 ClassLoader，以后其它的相关文章你们可以不必再细看了。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003EClassLoader 做什么的？\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E顾名思义，它是用来加载 Class 的。它负责将 Class 的字节码形式转换成内存形式的 Class 对象。字节码可以来自于磁盘文件 *.class，也可以是 jar 包里的 *.class，也可以来自远程服务器提供的字节流，字节码的本质就是一个字节数组 []byte，它有特定的复杂的内部格式。\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-a0cacd578df9f00e486f3f34ed77a9f2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"599\" data-rawheight=\"117\" class=\"origin_image zh-lightbox-thumb\" width=\"599\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-a0cacd578df9f00e486f3f34ed77a9f2_r.jpg\"\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg%20xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg'%20width='599'%20height='117'&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"599\" data-rawheight=\"117\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"599\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-a0cacd578df9f00e486f3f34ed77a9f2_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-a0cacd578df9f00e486f3f34ed77a9f2_b.jpg\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E有很多字节码加密技术就是依靠定制 ClassLoader 来实现的。先使用工具对字节码文件进行加密，运行时使用定制的 ClassLoader 先解密文件内容再加载这些解密后的字节码。\u003C\u002Fp\u003E\u003Cp\u003E每个 Class 对象的内部都有一个 classLoader 字段来标识自己是由哪个 ClassLoader 加载的。ClassLoader 就像一个容器，里面装了很多已经加载的 Class 对象。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ET\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efinal\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EclassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003E延迟加载\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003EJVM 运行并不是一次性加载所需要的全部类的，它是按需加载，也就是延迟加载。程序在运行的过程中会逐渐遇到很多不认识的新类，这时候就会调用 ClassLoader 来加载这些类。加载完成后就会将 Class 对象存在 ClassLoader 里面，下次就不需要重新加载了。\u003C\u002Fp\u003E\u003Cp\u003E比如你在调用某个类的静态方法时，首先这个类肯定是需要被加载的，但是并不会触及这个类的实例字段，那么实例字段的类别 Class 就可以暂时不必去加载，但是它可能会加载静态字段相关的类别，因为静态方法会访问静态字段。而实例字段的类别需要等到你实例化对象的时候才可能会加载。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003E各司其职\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003EJVM 运行实例中会存在多个 ClassLoader，不同的 ClassLoader 会从不同的地方加载字节码文件。它可以从不同的文件目录加载，也可以从不同的 jar 文件中加载，也可以从网络上不同的服务地址来加载。\u003C\u002Fp\u003E\u003Cp\u003EJVM 中内置了三个重要的 ClassLoader，分别是 BootstrapClassLoader、ExtensionClassLoader 和 AppClassLoader。\u003C\u002Fp\u003E\u003Cp\u003EBootstrapClassLoader 负责加载 JVM 运行时核心类，这些类位于 JAVA_HOME\u002Flib\u002Frt.jar 文件中，我们常用内置库 java.xxx.* 都在里面，比如 java.util.*、java.io.*、java.nio.*、java.lang.* 等等。这个 ClassLoader 比较特殊，它是由 C 代码实现的，我们将它称之为「根加载器」。\u003C\u002Fp\u003E\u003Cp\u003EExtensionClassLoader 负责加载 JVM 扩展类，比如 swing 系列、内置的 js 引擎、xml 解析器 等等，这些库名通常以 javax 开头，它们的 jar 包位于 JAVA_HOME\u002Flib\u002Fext\u002F*.jar 中，有很多 jar 包。\u003C\u002Fp\u003E\u003Cp\u003EAppClassLoader 才是直接面向我们用户的加载器，它会加载 Classpath 环境变量里定义的路径中的 jar 包和目录。我们自己编写的代码以及使用的第三方 jar 包通常都是由它来加载的。\u003C\u002Fp\u003E\u003Cp\u003E那些位于网络上静态文件服务器提供的 jar 包和 class文件，jdk 内置了一个 URLClassLoader，用户只需要传递规范的网络路径给构造器，就可以使用 URLClassLoader 来加载远程类库了。URLClassLoader 不但可以加载远程类库，还可以加载本地路径的类库，取决于构造器中不同的地址形式。ExtensionClassLoader 和 AppClassLoader 都是 URLClassLoader 的子类，它们都是从本地文件系统里加载类库。\u003C\u002Fp\u003E\u003Cp\u003EAppClassLoader 可以由 ClassLoader 类提供的静态方法 getSystemClassLoader() 得到，它就是我们所说的「系统类加载器」，我们用户平时编写的类代码通常都是由它加载的。当我们的 main 方法执行的时候，这第一个用户类的加载器就是 AppClassLoader。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003EClassLoader 传递性\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E程序在运行过程中，遇到了一个未知的类，它会选择哪个 ClassLoader 来加载它呢？虚拟机的策略是使用调用者 Class 对象的 ClassLoader 来加载当前未知的类。何为调用者 Class 对象？就是在遇到这个未知的类时，虚拟机肯定正在运行一个方法调用（静态方法或者实例方法），这个方法挂在哪个类上面，那这个类就是调用者 Class 对象。前面我们提到每个 Class 对象里面都有一个 classLoader 属性记录了当前的类是由谁来加载的。\u003C\u002Fp\u003E\u003Cp\u003E因为 ClassLoader 的传递性，所有延迟加载的类都会由初始调用 main 方法的这个 ClassLoader 全全负责，它就是 AppClassLoader。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003E双亲委派\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E前面我们提到 AppClassLoader 只负责加载 Classpath 下面的类库，如果遇到没有加载的系统类库怎么办，AppClassLoader 必须将系统类库的加载工作交给 BootstrapClassLoader 和 ExtensionClassLoader 来做，这就是我们常说的「双亲委派」。\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6d038f875790e1cdbf17a9aac11961e3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"375\" data-rawheight=\"373\" class=\"content_image\" width=\"375\"\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg%20xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg'%20width='375'%20height='373'&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"375\" data-rawheight=\"373\" class=\"content_image lazy\" width=\"375\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6d038f875790e1cdbf17a9aac11961e3_b.jpg\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EAppClassLoader 在加载一个未知的类名时，它并不是立即去搜寻 Classpath，它会首先将这个类名称交给 ExtensionClassLoader 来加载，如果 ExtensionClassLoader 可以加载，那么 AppClassLoader 就不用麻烦了。否则它就会搜索 Classpath 。\u003C\u002Fp\u003E\u003Cp\u003E而 ExtensionClassLoader 在加载一个未知的类名时，它也并不是立即搜寻 ext 路径，它会首先将类名称交给 BootstrapClassLoader 来加载，如果 BootstrapClassLoader 可以加载，那么 ExtensionClassLoader 也就不用麻烦了。否则它就会搜索 ext 路径下的 jar 包。\u003C\u002Fp\u003E\u003Cp\u003E这三个 ClassLoader 之间形成了级联的父子关系，每个 ClassLoader 都很懒，尽量把工作交给父亲做，父亲干不了了自己才会干。每个 ClassLoader 对象内部都会有一个 parent 属性指向它的父加载器。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Efinal\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eparent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E值得注意的是图中的 ExtensionClassLoader 的 parent 指针画了虚线，这是因为它的 parent 的值是 null，当 parent 字段是 null 时就表示它的父加载器是「根加载器」。如果某个 Class 对象的 classLoader 属性值是 null，那么就表示这个类也是「根加载器」加载的。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003EClass.forName\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E当我们在使用 jdbc 驱动时，经常会使用 Class.forName 方法来动态加载驱动类。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EforName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"com.mysql.cj.jdbc.Driver\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E其原理是 mysql 驱动的 Driver 类里有一个静态代码块，它会在 Driver 类被加载的时候执行。这个静态代码块会将 mysql 驱动实例注册到全局的 jdbc 驱动管理器里。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EDriver\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Estatic\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Etry\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n       \u003Cspan class=\"n\"\u003Ejava\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Esql\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EDriverManager\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EregisterDriver\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EDriver\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E());\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ecatch\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ESQLException\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EE\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n       \u003Cspan class=\"k\"\u003Ethrow\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ERuntimeException\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"Can't register driver!\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EforName 方法同样也是使用调用者 Class 对象的 ClassLoader 来加载目标类。不过 forName 还提供了多参数版本，可以指定使用哪个 ClassLoader 来加载\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;?&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EforName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eboolean\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Einitialize\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E通过这种形式的 forName 方法可以突破内置加载器的限制，通过使用自定类加载器允许我们自由加载其它任意来源的类库。根据 ClassLoader 的传递性，目标类库传递引用到的其它类库也将会使用自定义加载器加载。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003E自定义加载器\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003EClassLoader 里面有三个重要的方法 loadClass()、findClass() 和 defineClass()。\u003C\u002Fp\u003E\u003Cp\u003EloadClass() 方法是加载目标类的入口，它首先会查找当前 ClassLoader 以及它的双亲里面是否已经加载了目标类，如果没有找到就会让双亲尝试加载，如果双亲都加载不了，就会调用 findClass() 让自定义加载器自己来加载目标类。ClassLoader 的 findClass() 方法是需要子类来覆盖的，不同的加载器将使用不同的逻辑来获取目标类的字节码。拿到这个字节码之后再调用 defineClass() 方法将字节码转换成 Class 对象。下面我使用伪代码表示一下基本过程\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F 加载入口，定义了双亲委派规则\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F 是否已经加载了\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EfindFromLoaded\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"c1\"\u003E\u002F\u002F 交给双亲\u003C\u002Fspan\u003E\n      \u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eparent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"kc\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"c1\"\u003E\u002F\u002F 双亲都不行，只能靠自己了\u003C\u002Fspan\u003E\n      \u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EfindClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F 交给子类自己去实现\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EfindClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ethrow\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassNotFoundException\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E();\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"c1\"\u003E\u002F\u002F 组装Class对象\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EdefineClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E[]\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecode\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EbuildClassFromCode\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecode\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003ECustomClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Eextends\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EfindClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F 寻找字节码\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kt\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E[]\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecode\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EfindCodeFromSomewhere\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F 组装Class对象\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EdefineClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecode\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E自定义类加载器不易破坏双亲委派规则，不要轻易覆盖 loadClass 方法。否则可能会导致自定义加载器无法加载内置的核心类库。在使用自定义加载器时，要明确好它的父加载器是谁，将父加载器通过子类的构造器传入。如果父类加载器是 null，那就表示父加载器是「根加载器」。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u002F\u002F ClassLoader 构造器\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Eprotected\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eparent\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E双亲委派规则可能会变成三亲委派，四亲委派，取决于你使用的父加载器是谁，它会一直递归委派到根加载器。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003EClass.forName vs ClassLoader.loadClass\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E这两个方法都可以用来加载目标类，它们之间有一个小小的区别，那就是 Class.forName() 方法可以获取原生类型的 Class，而 ClassLoader.loadClass() 则会报错。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;?&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ex\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EforName\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"[I\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ESystem\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"n\"\u003Ex\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetSystemClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E().\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"[I\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ESystem\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E---------------------\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"nc\"\u003EI\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"n\"\u003EException\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ethread\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E\"main\"\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ejava\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Elang\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EClassNotFoundException\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EI\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2\u003E\u003Cb\u003E钻石依赖\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E项目管理上有一个著名的概念叫着「钻石依赖」，是指软件依赖导致同一个软件包的两个版本需要共存而不能冲突。\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7a471cc06fd74bb65984647dbe621a8f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"606\" data-rawheight=\"298\" class=\"origin_image zh-lightbox-thumb\" width=\"606\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7a471cc06fd74bb65984647dbe621a8f_r.jpg\"\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg%20xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg'%20width='606'%20height='298'&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"606\" data-rawheight=\"298\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"606\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7a471cc06fd74bb65984647dbe621a8f_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7a471cc06fd74bb65984647dbe621a8f_b.jpg\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cp\u003E我们平时使用的 maven 是这样解决钻石依赖的，它会从多个冲突的版本中选择一个来使用，如果不同的版本之间兼容性很糟糕，那么程序将无法正常编译运行。Maven 这种形式叫「扁平化」依赖管理。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cp\u003E使用 ClassLoader 可以解决钻石依赖问题。不同版本的软件包使用不同的 ClassLoader 来加载，\u003Cb\u003E位于不同 ClassLoader 中名称一样的类实际上是不同的类\u003C\u002Fb\u003E。下面让我们使用 URLClassLoader 来尝试一个简单的例子，它默认的父加载器是 AppClassLoader\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecat\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E~\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esource\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ejcl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EDep\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ejava\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EDep\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003ESystem\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"v1\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecat\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E~\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esource\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ejcl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ev2\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EDep\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ejava\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EDep\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n \u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"n\"\u003ESystem\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"v1\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecat\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E~\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esource\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ejcl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ETest\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ejava\u003C\u002Fspan\u003E\n\u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003ETest\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Estatic\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E[]\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eargs\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"kd\"\u003Ethrows\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EException\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev1dir\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E\"file:\u002F\u002F\u002FUsers\u002Fqianwp\u002Fsource\u002Fjcl\u002Fv1\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EString\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev2dir\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E\"file:\u002F\u002F\u002FUsers\u002Fqianwp\u002Fsource\u002Fjcl\u002Fv2\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EURLClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EURLClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EURL\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E[]{\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EURL\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ev1dir\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)});\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EURLClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev2\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EURLClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EURL\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E[]{\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EURL\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ev2dir\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)});\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;?&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"Dep\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EObject\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv1\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetConstructor\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E().\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EnewInstance\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E();\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetMethod\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"print\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E).\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Einvoke\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv1\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;?&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv2Class\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev2\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"Dep\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003EObject\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv2\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv2Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetConstructor\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E().\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EnewInstance\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E();\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003Edepv2Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetMethod\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"print\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E).\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Einvoke\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv2\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"n\"\u003ESystem\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eout\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eequals\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv2Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E));\u003C\u002Fspan\u003E\n   \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E在运行之前，我们需要对依赖的类库进行编译\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecd\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E~\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esource\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ejcl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ejavac\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EDep\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ejava\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecd\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E~\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esource\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ejcl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ev2\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ejavac\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EDep\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ejava\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecd\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E~\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Esource\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ejcl\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ejavac\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETest\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Ejava\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003E$\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ejava\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETest\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Ev2\u003C\u002Fspan\u003E\n\u003Cspan class=\"kc\"\u003Efalse\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E在这个例子中如果两个 URLClassLoader 指向的路径是一样的，下面这个表达式还是 false，因为即使是同样的字节码用不同的 ClassLoader 加载出来的类都不能算同一个类\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eequals\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv2Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E我们还可以让两个不同版本的 Dep 类实现同一个接口，这样可以避免使用反射的方式来调用 Dep 类里面的方法。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&lt;?&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E\"Dep\"\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EIPrint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Edepv1\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EIPrint\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Edepv1Class\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetConstructor\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E().\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EnewInstance\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Edepv1\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EClassLoader 固然可以解决依赖冲突问题，不过它也限制了不同软件包的操作界面必须使用反射或接口的方式进行动态调用。Maven 没有这种限制，它依赖于虚拟机的默认懒惰加载策略，运行过程中如果没有显示使用定制的 ClassLoader，那么从头到尾都是在使用 AppClassLoader，而不同版本的同名类必须使用不同的 ClassLoader 加载，所以 Maven 不能完美解决钻石依赖。\u003Cbr\u003E如果你想知道有没有开源的包管理工具可以解决钻石依赖的，我推荐你了解一下 sofa-ark，它是蚂蚁金服开源的轻量级类隔离框架。\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003E分工与合作\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E这里我们重新理解一下 ClassLoader 的意义，它相当于类的命名空间，起到了类隔离的作用。位于同一个 ClassLoader 里面的类名是唯一的，不同的 ClassLoader 可以持有同名的类。ClassLoader 是类名称的容器，是类的沙箱。\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-354fd6b023feddff14f90b0eeb8181aa_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1152\" data-rawheight=\"1052\" class=\"origin_image zh-lightbox-thumb\" width=\"1152\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-354fd6b023feddff14f90b0eeb8181aa_r.jpg\"\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg%20xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg'%20width='1152'%20height='1052'&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1152\" data-rawheight=\"1052\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1152\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-354fd6b023feddff14f90b0eeb8181aa_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-354fd6b023feddff14f90b0eeb8181aa_b.jpg\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cp\u003E不同的 ClassLoader 之间也会有合作，它们之间的合作是通过 parent 属性和双亲委派机制来完成的。parent 具有更高的加载优先级。除此之外，parent 还表达了一种共享关系，当多个子 ClassLoader 共享同一个 parent 时，那么这个 parent 里面包含的类可以认为是所有子 ClassLoader 共享的。这也是为什么 BootstrapClassLoader 被所有的类加载器视为祖先加载器，JVM 核心类库自然应该被共享。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Ch2\u003E\u003Cb\u003EThread.contextClassLoader\u003C\u002Fb\u003E\u003C\u002Fh2\u003E\u003Cp\u003E如果你稍微阅读过 Thread 的源代码，你会在它的实例字段中发现有一个字段非常特别\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"nc\"\u003EThread\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n  \u003Cspan class=\"kd\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EcontextClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EgetContextClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EcontextClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"kd\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003EsetContextClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EcontextClassLoader\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecl\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"o\"\u003E...\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EcontextClassLoader「线程上下文类加载器」，这究竟是什么东西？\u003C\u002Fp\u003E\u003Cp\u003E首先 contextClassLoader 是那种需要显示使用的类加载器，如果你没有显示使用它，也就永远不会在任何地方用到它。你可以使用下面这种方式来显示使用它\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-java\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EThread\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EcurrentThread\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E().\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EgetContextClassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E().\u003C\u002Fspan\u003E\u003Cspan class=\"na\"\u003EloadClass\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E);\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E这意味着如果你使用 forName(string name) 方法加载目标类，它不会自动使用 contextClassLoader。那些因为代码上的依赖关系而懒惰加载的类也不会自动使用 contextClassLoader来加载。\u003C\u002Fp\u003E\u003Cp\u003E其次线程的 contextClassLoader 是从父线程那里继承过来的，所谓父线程就是创建了当前线程的线程。程序启动时的 main 线程的 contextClassLoader 就是 AppClassLoader。这意味着如果没有人工去设置，那么所有的线程的 contextClassLoader 都是 AppClassLoader。\u003C\u002Fp\u003E\u003Cp\u003E那这个 contextClassLoader 究竟是做什么用的？我们要使用前面提到了类加载器分工与合作的原理来解释它的用途。\u003C\u002Fp\u003E\u003Cp\u003E它可以做到跨线程共享类，只要它们共享同一个 contextClassLoader。父子线程之间会自动传递 contextClassLoader，所以共享起来将是自动化的。\u003C\u002Fp\u003E\u003Cp\u003E如果不同的线程使用不同的 contextClassLoader，那么不同的线程使用的类就可以隔离开来。\u003C\u002Fp\u003E\u003Cp\u003E如果我们对业务进行划分，不同的业务使用不同的线程池，线程池内部共享同一个 contextClassLoader，线程池之间使用不同的 contextClassLoader，就可以很好的起到隔离保护的作用，避免类版本冲突。\u003C\u002Fp\u003E\u003Cp\u003E如果我们不去定制 contextClassLoader，那么所有的线程将会默认使用 AppClassLoader，所有的类都将会是共享的。\u003C\u002Fp\u003E\u003Cp\u003E线程的 contextClassLoader 使用场合比较罕见，如果上面的逻辑晦涩难懂也不必过于计较。\u003C\u002Fp\u003E\u003Cp\u003EJDK9 增加了模块功能之后对类加载器的结构设计做了一定程度的修改，不过类加载器的原理还是类似的，作为类的容器，它起到类隔离的作用，同时还需要依靠双亲委派机制来建立不同的类加载器之间的合作关系。\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f25a51200e4670e3e42fdd0a7a209d8d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"468\" data-rawheight=\"189\" class=\"origin_image zh-lightbox-thumb\" width=\"468\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f25a51200e4670e3e42fdd0a7a209d8d_r.jpg\"\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg%20xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg'%20width='468'%20height='189'&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"468\" data-rawheight=\"189\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"468\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f25a51200e4670e3e42fdd0a7a209d8d_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f25a51200e4670e3e42fdd0a7a209d8d_b.jpg\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E阅读更多精品文章，微信扫一扫上面的二维码关注公众号「码洞」\u003C\u002Fp\u003E","column":{"updated":1540874298,"description":"Good news everyone!","canManage":false,"intro":"码出个未来","isFollowing":false,"urlToken":"codehole","id":"codehole","articlesCount":99,"acceptSubmission":true,"title":"码洞","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fcodehole","commentPermission":"all","created":1514259372,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-242e1c8843659a1a0d6c580c5287c609_b.jpg","author":{"isFollowed":false,"name":"老钱","headline":"Good news everyone!","gender":1,"userType":"people","urlToken":"codehole","url":"\u002Fpeople\u002F89ce500f3e247d730059335e09f5b99f","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg","isFollowing":false,"type":"people","id":"89ce500f3e247d730059335e09f5b99f"},"followers":3328,"type":"column"},"commentCount":8,"isTitleImageFullScreen":false,"imageUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-09c3b95189b59c5acd7a96250a355b52_b.jpg","voting":1,"type":"article","suggestEdit":{"status":false,"url":"","reason":"","tip":"","title":""}}},"columns":{"codehole":{"updated":1540874298,"description":"Good news everyone!","canManage":false,"intro":"码出个未来","isFollowing":false,"urlToken":"codehole","id":"codehole","articlesCount":99,"acceptSubmission":true,"title":"码洞","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fcodehole","commentPermission":"all","created":1514259372,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-242e1c8843659a1a0d6c580c5287c609_b.jpg","author":{"isFollowed":false,"name":"老钱","headline":"Good news everyone!","gender":1,"userType":"people","urlToken":"codehole","url":"\u002Fpeople\u002F89ce500f3e247d730059335e09f5b99f","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-3752c90e84b5e5402cadf6e05aa014fc_l.jpg","isFollowing":false,"type":"people","id":"89ce500f3e247d730059335e09f5b99f"},"followers":3328,"type":"column"},"beautifuljava":{"updated":1512873743,"description":"一个分享Java知识干货的专栏，内容涵盖Java SE、Spring、JVM调优等领域的知识。同时这也是一本帮助你写出优雅的Java代码，拥有美丽的编程心情的Java修炼手册。","canManage":false,"intro":"Java修炼手册，欢迎用优质文章砸我","isFollowing":false,"urlToken":"beautifuljava","id":"beautifuljava","articlesCount":63,"acceptSubmission":true,"title":"Beautiful Java","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fbeautifuljava","commentPermission":"all","created":1504259255,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-707b9f4aafeac8fc25d2e1e64252ce93_b.jpg","author":{"isFollowed":false,"name":"柳树","headline":"微信公众号 Bridge4You","gender":1,"userType":"people","urlToken":"hong-ze-yang","url":"\u002Fpeople\u002F45885a5ec948d71a917f88fe9f79e93e","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-5f8318f188a97a5845e5b2b912f1b944_l.jpg","isFollowing":false,"type":"people","id":"45885a5ec948d71a917f88fe9f79e93e"},"followers":5191,"type":"column"},"hinus":{"updated":1491065432,"description":"","canManage":false,"intro":"","isFollowing":true,"urlToken":"hinus","id":"hinus","articlesCount":136,"acceptSubmission":true,"title":"进击的Java新人","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fhinus","commentPermission":"all","created":1481546022,"imageUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-5dc79b8531008b2bece655aabd627941_b.jpg","author":{"isFollowed":false,"name":"海纳","headline":"罪与罚","gender":1,"userType":"people","urlToken":"hinus","url":"\u002Fpeople\u002Fa6fecae6ca1389079dbb63d0b4368eba","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-4367659cbc867e1bf7d91e93087a5b6b_l.jpg","isFollowing":false,"type":"people","id":"a6fecae6ca1389079dbb63d0b4368eba"},"followers":24194,"type":"column"}},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"positions":{},"promotions":{},"drafts":{}},"currentUser":"26a88e420afd451c2aaab55ac5747b59","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"positionsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-ad_alam-2","expPrefix":"ad_alam","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-ad_ios_lans-2","expPrefix":"ad_ios_lans","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-ad_lans-2","expPrefix":"ad_lans","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-col_heifetz_api2-2","expPrefix":"col_heifetz_api2","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-col_web_label-4","expPrefix":"col_web_label","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_adr_dkts-11","expPrefix":"gw_adr_dkts","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_adr_mini-2","expPrefix":"gw_adr_mini","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_adr_wbtp-2","expPrefix":"gw_adr_wbtp","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_adr_wxfb-2","expPrefix":"gw_adr_wxfb","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_anr_wxbk-2","expPrefix":"gw_anr_wxbk","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_ios_dkts-8","expPrefix":"gw_ios_dkts","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_ios_mini-2","expPrefix":"gw_ios_mini","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_ios_tk_d-2","expPrefix":"gw_ios_tk_d","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_ios_wxb-2","expPrefix":"gw_ios_wxb","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_ios_wxfb-1","expPrefix":"gw_ios_wxfb","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_mmlssq-2","expPrefix":"gw_mmlssq","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-gw_wbtp-2","expPrefix":"gw_wbtp","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-km_cashier_color-2","expPrefix":"km_cashier_color","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-km_ca_co_ios-2","expPrefix":"km_ca_co_ios","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-km_center-1","expPrefix":"km_center","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-km_member_switch-1","expPrefix":"km_member_switch","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-mp_adr_bvc-2","expPrefix":"mp_adr_bvc","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_amap_ios-1","expPrefix":"mp_amap_ios","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_apm-1","expPrefix":"mp_apm","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_hb_si-3","expPrefix":"mp_hb_si","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_ios_bvc-2","expPrefix":"mp_ios_bvc","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_ios_webp-2","expPrefix":"mp_ios_webp","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_rec_column-2","expPrefix":"mp_rec_column","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_use_gd-2","expPrefix":"mp_use_gd","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-mp_video_feed-2","expPrefix":"mp_video_feed","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_answer_next-5","expPrefix":"qa_answer_next","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ans_preload1-2","expPrefix":"qa_ans_preload1","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_an_hy_preload-2","expPrefix":"qa_an_hy_preload","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_arti_comment-2","expPrefix":"qa_arti_comment","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-qa_a_q_a_c-2","expPrefix":"qa_a_q_a_c","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_column_invite-2","expPrefix":"qa_column_invite","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_comment-2","expPrefix":"qa_comment","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_comment_v2-2","expPrefix":"qa_comment_v2","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_editor-2","expPrefix":"qa_editor","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_editor_ref-2","expPrefix":"qa_editor_ref","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_edit_question-2","expPrefix":"qa_edit_question","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_invite-2","expPrefix":"qa_invite","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_invite_answer-2","expPrefix":"qa_invite_answer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ios_ar_rec_co-4","expPrefix":"qa_ios_ar_rec_co","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ios_comment-4","expPrefix":"qa_ios_comment","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ios_editor_v3-2","expPrefix":"qa_ios_editor_v3","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ios_new_arco-2","expPrefix":"qa_ios_new_arco","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ios_qst_ncmt-2","expPrefix":"qa_ios_qst_ncmt","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_ios_qtoc-2","expPrefix":"qa_ios_qtoc","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_new_answer-2","expPrefix":"qa_new_answer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_new_editor-2","expPrefix":"qa_new_editor","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_next_answer-6","expPrefix":"qa_next_answer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_notify_invite-2","expPrefix":"qa_notify_invite","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_preload_html-2","expPrefix":"qa_preload_html","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-qa_ques_comment-2","expPrefix":"qa_ques_comment","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-se_best_answerer-8","expPrefix":"se_best_answerer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_filter-2","expPrefix":"se_filter","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_ios_topsearch-2","expPrefix":"se_ios_topsearch","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_title_must-2","expPrefix":"se_title_must","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_dtmt-10","expPrefix":"top_dtmt","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_feed_card-1","expPrefix":"top_feed_card","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_fqai-3","expPrefix":"top_fqai","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_hqt-2","expPrefix":"top_hqt","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_pfq-14","expPrefix":"top_pfq","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_root-3","expPrefix":"top_root","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_update-2","expPrefix":"top_update","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-tp_discuss_test-3","expPrefix":"tp_discuss_test","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-tp_dis_feed_test-5","expPrefix":"tp_dis_feed_test","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_android_medal-2","expPrefix":"us_android_medal","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-us_consult-1","expPrefix":"us_consult","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_consult_adr-2","expPrefix":"us_consult_adr","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_medal_badge-2","expPrefix":"us_medal_badge","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-us_more_hyb_card-2","expPrefix":"us_more_hyb_card","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-us_mqtt_5_24_0-2","expPrefix":"us_mqtt_5_24_0","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_profile_medal-2","expPrefix":"us_profile_medal","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"launch-vd_adrupload_cdn-2","expPrefix":"vd_adrupload_cdn","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_ios_video-2","expPrefix":"vd_ios_video","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_new_video-2","expPrefix":"vd_new_video","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_ppt_enter_2-2","expPrefix":"vd_ppt_enter_2","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_upload_cdn-2","expPrefix":"vd_upload_cdn","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_videohome-2","expPrefix":"vd_videohome","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_conti-2","expPrefix":"vd_video_conti","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_continu-2","expPrefix":"vd_video_continu","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_conti_2-2","expPrefix":"vd_video_conti_2","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_volume-2","expPrefix":"vd_video_volume","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_vid_qt-2","expPrefix":"vd_vid_qt","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zm_core-2","expPrefix":"vd_zm_core","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"id_adr_ps-2","expPrefix":"id_adr_ps","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"ad_lto-12","expPrefix":"ad_lto","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_s_v_recommend-9","expPrefix":"vd_s_v_recommend","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_searchfeed-6","expPrefix":"se_searchfeed","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_ad_index-1","expPrefix":"se_ad_index","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_time_search-3","expPrefix":"se_time_search","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"se_short_ltr-2","expPrefix":"se_short_ltr","isDynamicallyUpdated":true,"isRuntime":true,"includeTriggerInfo":false},{"expId":"se_new_market-23","expPrefix":"se_new_market","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_rfsh_all-7","expPrefix":"top_rfsh_all","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_recall_tb-3","expPrefix":"top_recall_tb","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_new_user_rec-4","expPrefix":"top_new_user_rec","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_nucc-6","expPrefix":"top_nucc","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_tag_iso-10","expPrefix":"top_tag_iso","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_vd_fix_pos-7","expPrefix":"top_vd_fix_pos","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_new_feed-2","expPrefix":"top_new_feed","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_billab-1","expPrefix":"top_billab","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_video_rew-1","expPrefix":"top_video_rew","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_recall_exp-6","expPrefix":"top_recall_exp","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_deep_promo-2","expPrefix":"top_deep_promo","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_deep_rerank-3","expPrefix":"top_deep_rerank","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_grank-9","expPrefix":"top_grank","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_ab_vali-2","expPrefix":"top_ab_vali","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_v_optimise-1","expPrefix":"top_v_optimise","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_feed_itemcf-2","expPrefix":"top_feed_itemcf","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_ac_merge-4","expPrefix":"top_ac_merge","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"tp_favlist_skus-3","expPrefix":"tp_favlist_skus","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"se_minor_onebox","type":"String","value":"d","chainId":"_all_"},{"id":"top_newfollow","type":"String","value":"0","chainId":"_all_"},{"id":"adr_edit_question","type":"String","value":"1"},{"id":"adr_laws_length","type":"String","value":"-1"},{"id":"ios_invite_ans","type":"String","value":"B"},{"id":"ios_wbtp","type":"String","value":"1"},{"id":"top_rerank_reweight","type":"String","value":"-1","chainId":"_all_"},{"id":"top_tag_isolation","type":"String","value":"2","chainId":"_all_"},{"id":"top_nszt","type":"String","value":"0","chainId":"_all_"},{"id":"top_pfq","type":"String","value":"5","chainId":"_all_"},{"id":"top_recall_deep_user","type":"String","value":"1","chainId":"_all_"},{"id":"top_recall_tb","type":"String","value":"3","chainId":"_all_"},{"id":"adr_unif","type":"String","value":"off"},{"id":"ios_psn","type":"String","value":"n"},{"id":"se_product_rank_list","type":"String","value":"0","chainId":"_all_"},{"id":"top_billboard_count","type":"String","value":"1","chainId":"_all_"},{"id":"adr_ans_video","type":"String","value":"N"},{"id":"adr_cta","type":"String","value":"0"},{"id":"adr_liguangi_test","type":"String","value":"1"},{"id":"adr_prt","type":"String","value":"false"},{"id":"top_billpic","type":"String","value":"0","chainId":"_all_"},{"id":"pf_creator_card","type":"String","value":"0","chainId":"_all_"},{"id":"pin_ef","type":"String","value":"orig","chainId":"_all_"},{"id":"se_relevant_query","type":"String","value":"new","chainId":"_all_"},{"id":"top_deep_promo","type":"String","value":"1","chainId":"_all_"},{"id":"adr_android_medal_badge_view","type":"String","value":"false"},{"id":"adr_comment_new_editor","type":"String","value":"1"},{"id":"adr_wxfb","type":"String","value":"0"},{"id":"ios_amap","type":"String","value":"y"},{"id":"top_recall_tb_short","type":"String","value":"61","chainId":"_all_"},{"id":"top_root_web","type":"String","value":"0","chainId":"_all_"},{"id":"top_sjre","type":"String","value":"0","chainId":"_all_"},{"id":"tp_favsku","type":"String","value":"c","chainId":"_all_"},{"id":"adr_article_new_comment","type":"String","value":"1"},{"id":"adr_video_upload_cdn","type":"String","value":"1"},{"id":"top_billab","type":"String","value":"0","chainId":"_all_"},{"id":"top_vd_op","type":"String","value":"0","chainId":"_all_"},{"id":"gw_guide","type":"String","value":"0","chainId":"_all_"},{"id":"ios_magitab","type":"String","value":"0"},{"id":"top_distinction","type":"String","value":"2","chainId":"_all_"},{"id":"adr_traffic_threshold","type":"String","value":"314572800"},{"id":"ios_ff_cardtype","type":"String","value":"A"},{"id":"se_dt","type":"String","value":"1","chainId":"_all_"},{"id":"ios_ydyq","type":"String","value":"X"},{"id":"se_boost","type":"String","value":"0","chainId":"_all_"},{"id":"top_feedre_itemcf","type":"String","value":"32","chainId":"_all_"},{"id":"adr_use_cashier","type":"String","value":"new"},{"id":"hb_billboard","type":"String","value":"0"},{"id":"hb_majorob_style","type":"String","value":"0"},{"id":"ios_question_new_comment","type":"String","value":"1"},{"id":"ios_7324","type":"String","value":"0"},{"id":"top_retagg","type":"String","value":"0","chainId":"_all_"},{"id":"adr_invite","type":"String","value":"true"},{"id":"adr_ppt_enter","type":"String","value":"1"},{"id":"ios_more_editcard","type":"String","value":"true"},{"id":"ios_video_upload_cdn","type":"String","value":"1"},{"id":"adr_task_statistics","type":"String","value":"false"},{"id":"ios_qtoc","type":"String","value":"1"},{"id":"top_manual_tag","type":"String","value":"1","chainId":"_all_"},{"id":"se_sltr","type":"String","value":"1","chainId":"_all_"},{"id":"top_recall","type":"String","value":"1","chainId":"_all_"},{"id":"top_recall_exp_v1","type":"String","value":"6","chainId":"_all_"},{"id":"top_yhgc","type":"String","value":"0","chainId":"_all_"},{"id":"adr_guest_refresh","type":"String","value":"1"},{"id":"adr_q_bar","type":"String","value":"NO"},{"id":"adr_sqtc","type":"String","value":"1"},{"id":"top_ntr","type":"String","value":"1","chainId":"_all_"},{"id":"ios_lans","type":"String","value":"close"},{"id":"ios_tk_d","type":"String","value":"1"},{"id":"se_backsearch","type":"String","value":"0","chainId":"_all_"},{"id":"se_consulting_price","type":"String","value":"n","chainId":"_all_"},{"id":"adr_enable_agent","type":"String","value":"0"},{"id":"adr_unfollow_reason","type":"String","value":"0"},{"id":"hb_consulting_price","type":"String","value":"np"},{"id":"ios_apm","type":"String","value":"1"},{"id":"top_universalebook","type":"String","value":"1","chainId":"_all_"},{"id":"se_engine","type":"String","value":"1","chainId":"_all_"},{"id":"top_hweb","type":"String","value":"0","chainId":"_all_"},{"id":"top_mlt_model","type":"String","value":"0","chainId":"_all_"},{"id":"top_root","type":"String","value":"1","chainId":"_all_"},{"id":"top_ac_merge","type":"String","value":"2","chainId":"_all_"},{"id":"top_billupdate1","type":"String","value":"3","chainId":"_all_"},{"id":"top_cc_at","type":"String","value":"1","chainId":"_all_"},{"id":"adr_bugly","type":"String","value":"n"},{"id":"adr_profile_medal","type":"String","value":"1"},{"id":"ios_topsearch","type":"String","value":"1"},{"id":"ios_vid_home","type":"String","value":"1"},{"id":"se_cm","type":"String","value":"1","chainId":"_all_"},{"id":"top_root_ac","type":"String","value":"1","chainId":"_all_"},{"id":"adr_mini","type":"String","value":"1"},{"id":"adr_more_hyb_card","type":"String","value":"1"},{"id":"ios_article_misc_panel","type":"String","value":"0"},{"id":"ios_medal_badge_view","type":"String","value":"true"},{"id":"ios_httpdns","type":"String","value":"aliyun"},{"id":"ios_hybrid_intercepting","type":"String","value":"1"},{"id":"ls_is_use_zrec","type":"String","value":"0","chainId":"_all_"},{"id":"top_tmt","type":"String","value":"0","chainId":"_all_"},{"id":"ios_launch_timeout","type":"String","value":"5"},{"id":"top_feedtopiccard","type":"String","value":"0","chainId":"_all_"},{"id":"top_recall_follow_user","type":"String","value":"91","chainId":"_all_"},{"id":"top_vd_gender","type":"String","value":"0","chainId":"_all_"},{"id":"top_is_gr","type":"String","value":"0","chainId":"_all_"},{"id":"adr_android_video_continuous","type":"String","value":"1"},{"id":"adr_comment","type":"String","value":"true"},{"id":"adr_feed_video_continuous","type":"String","value":"1"},{"id":"ios_mini","type":"String","value":"1"},{"id":"top_tagore","type":"String","value":"1","chainId":"_all_"},{"id":"top_uit","type":"String","value":"0","chainId":"_all_"},{"id":"web_heifetz_column_api2","type":"String","value":"1"},{"id":"web_question_invite","type":"String","value":"B"},{"id":"adr_new_hybrid","type":"String","value":"0"},{"id":"ios_yhyq","type":"String","value":"C"},{"id":"se_qc","type":"String","value":"0","chainId":"_all_"},{"id":"se_time_search","type":"String","value":"new","chainId":"_all_"},{"id":"tp_sticky_android","type":"String","value":"0","chainId":"_all_"},{"id":"adr_pdf","type":"String","value":"n"},{"id":"ios_ios_launch_mp4","type":"String","value":"1"},{"id":"top_gr_model","type":"String","value":"0","chainId":"_all_"},{"id":"top_video_fix_position","type":"String","value":"5","chainId":"_all_"},{"id":"ios_question_invite_v2","type":"String","value":"0"},{"id":"top_fqai","type":"String","value":"2","chainId":"_all_"},{"id":"top_rank","type":"String","value":"9","chainId":"_all_"},{"id":"adr_topsearch","type":"String","value":"2"},{"id":"adr_use_gd","type":"String","value":"y"},{"id":"ios_lssq","type":"String","value":"0"},{"id":"ios_profile_sig","type":"String","value":"true"},{"id":"top_mt","type":"String","value":"0","chainId":"_all_"},{"id":"top_vdio_rew","type":"String","value":"0","chainId":"_all_"},{"id":"top_ydyq","type":"String","value":"X","chainId":"_all_"},{"id":"adr_answer_dampen","type":"String","value":"0"},{"id":"ios_input_image","type":"String","value":"1"},{"id":"ios_new_player","type":"String","value":"0"},{"id":"top_card","type":"String","value":"-1","chainId":"_all_"},{"id":"adr_anr_watch","type":"String","value":"false"},{"id":"ios_article_recommend_column","type":"String","value":"1"},{"id":"ios_real_time_launch_http","type":"String","value":"http_off"},{"id":"ls_new_score","type":"String","value":"1","chainId":"_all_"},{"id":"top_recommend_topic_card","type":"String","value":"0","chainId":"_all_"},{"id":"top_sj","type":"String","value":"2","chainId":"_all_"},{"id":"top_tagore_topic","type":"String","value":"0","chainId":"_all_"},{"id":"adr_ques_comment","type":"String","value":"1"},{"id":"ios_question_answer_preload","type":"String","value":"1"},{"id":"top_multi_model","type":"String","value":"0","chainId":"_all_"},{"id":"top_nuc","type":"String","value":"0","chainId":"_all_"},{"id":"top_vd_rt_int","type":"String","value":"0","chainId":"_all_"},{"id":"adr_dsa","type":"String","value":"0"},{"id":"adr_preload_question","type":"String","value":"0"},{"id":"se_auto_syn","type":"String","value":"0","chainId":"_all_"},{"id":"top_nid","type":"String","value":"0","chainId":"_all_"},{"id":"top_tffrt","type":"String","value":"0","chainId":"_all_"},{"id":"ios_quill_editor","type":"String","value":"1"},{"id":"top_an","type":"String","value":"0","chainId":"_all_"},{"id":"top_f_r_nb","type":"String","value":"1","chainId":"_all_"},{"id":"top_new_user_gift","type":"String","value":"0","chainId":"_all_"},{"id":"web_new_label","type":"String","value":"1"},{"id":"adr_traffic_leak","type":"String","value":"false"},{"id":"ios_dkts","type":"String","value":"20"},{"id":"ios_x_z_c0","type":"String","value":"1"},{"id":"top_retag","type":"String","value":"0","chainId":"_all_"},{"id":"ios_cashier_color","type":"String","value":"1"},{"id":"ios_ps","type":"String","value":"0"},{"id":"top_login_card","type":"String","value":"1","chainId":"_all_"},{"id":"adr_next_answer_btn","type":"String","value":"3"},{"id":"adr_rlp","type":"String","value":"0"},{"id":"hb_liguangyi_test","type":"String","value":"1"},{"id":"ios_answer_hybrid_preload","type":"String","value":"1"},{"id":"pin_efs","type":"String","value":"orig","chainId":"_all_"},{"id":"se_majorob_style","type":"String","value":"0","chainId":"_all_"},{"id":"top_alt","type":"String","value":"0","chainId":"_all_"},{"id":"top_billvideo","type":"String","value":"0","chainId":"_all_"},{"id":"adr_cashier_color","type":"String","value":"1"},{"id":"ios_launch_timeout_2","type":"String","value":"-1"},{"id":"ios_profile_badge","type":"String","value":"true"},{"id":"ios_search_tab","type":"String","value":"0"},{"id":"top_free_content","type":"String","value":"-1","chainId":"_all_"},{"id":"top_nucc","type":"String","value":"3","chainId":"_all_"},{"id":"adr_real_time_launch_http","type":"String","value":"http_off"},{"id":"ios_next_ans","type":"String","value":"C"},{"id":"top_gif","type":"String","value":"0","chainId":"_all_"},{"id":"se_filter","type":"String","value":"1","chainId":"_all_"},{"id":"tp_discussion_feed_type_android","type":"String","value":"2","chainId":"_all_"},{"id":"adr_mqtt_5_24_0","type":"String","value":"1"},{"id":"hb_entity_ui","type":"String","value":"origin"},{"id":"ios_asp","type":"String","value":"off"},{"id":"ios_spic","type":"String","value":"0"},{"id":"top_follow_reason","type":"String","value":"0","chainId":"_all_"},{"id":"top_rerank_isolation","type":"String","value":"-1","chainId":"_all_"},{"id":"top_root_mg","type":"String","value":"1","chainId":"_all_"},{"id":"adr_question_editor","type":"String","value":"0"},{"id":"adr_zmcore","type":"String","value":"1"},{"id":"se_websearch","type":"String","value":"0","chainId":"_all_"},{"id":"top_feedre_cpt","type":"String","value":"101","chainId":"_all_"},{"id":"adr_consultation","type":"String","value":"1"},{"id":"ios_book_is_card","type":"String","value":"1"},{"id":"se_ltr","type":"String","value":"1","chainId":"_all_"},{"id":"top_tr","type":"String","value":"0","chainId":"_all_"},{"id":"adr_question_invite_v2","type":"String","value":"0"},{"id":"ios_pay_view","type":"String","value":"new"},{"id":"se_ad_index","type":"String","value":"10","chainId":"_all_"},{"id":"top_rerank_breakin","type":"String","value":"-1","chainId":"_all_"},{"id":"adr_android_launch_ad_mp4","type":"String","value":"open"},{"id":"adr_float_video","type":"String","value":"1"},{"id":"adr_pre_load_html","type":"String","value":"1"},{"id":"adr_ps","type":"String","value":"1"},{"id":"top_nad","type":"String","value":"1","chainId":"_all_"},{"id":"top_raf","type":"String","value":"n","chainId":"_all_"},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_"},{"id":"top_quality","type":"String","value":"0","chainId":"_all_"},{"id":"hb_report","type":"String","value":"0"},{"id":"se_billboardsearch","type":"String","value":"0","chainId":"_all_"},{"id":"se_ingress","type":"String","value":"on","chainId":"_all_"},{"id":"top_feedre_rtt","type":"String","value":"41","chainId":"_all_"},{"id":"hb_major_onebox","type":"String","value":"0"},{"id":"se_new_market_search","type":"String","value":"on","chainId":"_all_"},{"id":"top_bill","type":"String","value":"0","chainId":"_all_"},{"id":"web_zhuanlan_api2_w","type":"String","value":"0"},{"id":"se_consulting_switch","type":"String","value":"off","chainId":"_all_"},{"id":"se_major_onebox","type":"String","value":"major","chainId":"_all_"},{"id":"top_yc","type":"String","value":"0","chainId":"_all_"},{"id":"adr_wbtp","type":"String","value":"1"},{"id":"hb_best_answerer","type":"String","value":"3"},{"id":"ios_new_reader","type":"String","value":"1"},{"id":"ios_video_agent_4_22","type":"String","value":"false"},{"id":"se_search_feed","type":"String","value":"N","chainId":"_all_"},{"id":"top_ebook","type":"String","value":"0","chainId":"_all_"},{"id":"top_gr_auto_model","type":"String","value":"0","chainId":"_all_"},{"id":"top_hqt","type":"String","value":"9","chainId":"_all_"},{"id":"adr_audio_enable_exo","type":"String","value":"0"},{"id":"adr_new_roundtable","type":"String","value":"true"},{"id":"hb_live_btn_color","type":"String","value":"default_color"},{"id":"ios_mlssq","type":"String","value":"1"},{"id":"top_no_weighing","type":"String","value":"1","chainId":"_all_"},{"id":"ios_hybrid_editor_v3","type":"String","value":"1"},{"id":"se_wiki_box","type":"String","value":"1","chainId":"_all_"},{"id":"top_ad_slot","type":"String","value":"1","chainId":"_all_"},{"id":"adr_book_is_card","type":"String","value":"1"},{"id":"adr_new_answer_pager","type":"String","value":"true"},{"id":"adr_wxbk","type":"String","value":"1"},{"id":"ios_db_n_e","type":"String","value":"0"},{"id":"top_30","type":"String","value":"0","chainId":"_all_"},{"id":"top_followtop","type":"String","value":"1","chainId":"_all_"},{"id":"top_scaled_score","type":"String","value":"0","chainId":"_all_"},{"id":"top_v_album","type":"String","value":"1","chainId":"_all_"},{"id":"adr_recommend_column","type":"String","value":"1"},{"id":"hb_recommend_column","type":"String","value":"1"},{"id":"se_billboard","type":"String","value":"3","chainId":"_all_"},{"id":"se_gemini_service","type":"String","value":"content","chainId":"_all_"},{"id":"tp_sft","type":"String","value":"a","chainId":"_all_"},{"id":"web_column_auto_invite","type":"String","value":"1"},{"id":"ios_video_feed","type":"String","value":"1"},{"id":"ls_new_video","type":"String","value":"1","chainId":"_all_"},{"id":"se_merger","type":"String","value":"1","chainId":"_all_"},{"id":"top_gr_topic_reweight","type":"String","value":"0","chainId":"_all_"},{"id":"adr_medal","type":"String","value":"0"},{"id":"adr_osen_label","type":"String","value":"old"},{"id":"hb_new_upvote","type":"String","value":"online_upvote"},{"id":"ios_q_o_b","type":"String","value":"0"},{"id":"top_rerank_reformat","type":"String","value":"-1","chainId":"_all_"},{"id":"ios_comment","type":"String","value":"1"},{"id":"ios_searchbox","type":"String","value":"0"},{"id":"se_correct_ab","type":"String","value":"0","chainId":"_all_"},{"id":"top_nmt","type":"String","value":"0","chainId":"_all_"},{"id":"adr_httpdns","type":"String","value":"aliyun"},{"id":"adr_hybrid_dns","type":"String","value":"0"},{"id":"adr_member_switch","type":"String","value":"1"},{"id":"ios_ad_cta","type":"String","value":"0"},{"id":"top_roundtable","type":"String","value":"1","chainId":"_all_"},{"id":"ios_roundtable","type":"String","value":"B"},{"id":"adr_new_reader","type":"String","value":"1"},{"id":"adr_sdk_data_switch","type":"String","value":"0"},{"id":"adr_video_ne_comment","type":"String","value":"0"},{"id":"ios_q_a_c","type":"String","value":"1"},{"id":"web_stream_render","type":"String","value":"0"},{"id":"ios_ad_skip_pos","type":"String","value":"up"},{"id":"ios_notif_new_invite","type":"String","value":"on"},{"id":"se_tf","type":"String","value":"1","chainId":"_all_"},{"id":"top_local","type":"String","value":"1","chainId":"_all_"},{"id":"top_video_rew","type":"String","value":"0","chainId":"_all_"},{"id":"adr_anp","type":"String","value":"android_answer_pager_off"},{"id":"adr_dkts","type":"String","value":"20"},{"id":"adr_traffic_monitor","type":"String","value":"false"},{"id":"ios_telecom_login","type":"String","value":"1"},{"id":"top_rerank_repos","type":"String","value":"-1","chainId":"_all_"},{"id":"web_heifetz_grow_ad","type":"String","value":"1"},{"id":"adr_spic","type":"String","value":"0"},{"id":"ios_add_question_v2","type":"String","value":"0"},{"id":"ios_ad_web_cache","type":"String","value":"0"},{"id":"top_new_user_rec","type":"String","value":"1","chainId":"_all_"},{"id":"ios_1752","type":"String","value":"0"},{"id":"ios_km_center","type":"String","value":"1"},{"id":"se_daxuechuisou","type":"String","value":"new","chainId":"_all_"},{"id":"web_new_comment","type":"String","value":"1"},{"id":"adr_grow_guide_login_4","type":"String","value":"3"},{"id":"adr_profile_label","type":"String","value":"1"},{"id":"adr_telecom_login","type":"String","value":"1"},{"id":"hb_show_special_all","type":"String","value":"0"},{"id":"top_topic_feedre","type":"String","value":"21","chainId":"_all_"},{"id":"top_user_gift","type":"String","value":"0","chainId":"_all_"},{"id":"top_video_score","type":"String","value":"1","chainId":"_all_"},{"id":"adr_ydyq","type":"String","value":"X"},{"id":"hb_follow_guide_v2","type":"String","value":"0"},{"id":"se_rescore","type":"String","value":"1","chainId":"_all_"},{"id":"top_promo","type":"String","value":"1","chainId":"_all_"},{"id":"top_newfollowans","type":"String","value":"0","chainId":"_all_"},{"id":"top_recall_tb_follow","type":"String","value":"71","chainId":"_all_"},{"id":"adr_challenge_plan","type":"String","value":"3"},{"id":"ios_q_bar","type":"String","value":"NO"},{"id":"se_cq","type":"String","value":"1","chainId":"_all_"},{"id":"se_dl","type":"String","value":"1","chainId":"_all_"},{"id":"se_gi","type":"String","value":"0","chainId":"_all_"},{"id":"web_zhuanlan_api2","type":"String","value":"0"},{"id":"top_dtmt","type":"String","value":"2","chainId":"_all_"},{"id":"top_new_feed","type":"String","value":"2","chainId":"_all_"},{"id":"ios_wxbk","type":"String","value":"1"},{"id":"top_recall_tb_long","type":"String","value":"51","chainId":"_all_"},{"id":"top_slot_ad_pos","type":"String","value":"1","chainId":"_all_"},{"id":"adr_android_gdt","type":"String","value":"open"},{"id":"adr_editor_version","type":"String","value":"V3"},{"id":"adr_launch_ad_new_strategy","type":"String","value":"close"},{"id":"hb_unfollow_reason","type":"String","value":"0"},{"id":"ios_consultation","type":"String","value":"1"},{"id":"top_wonderful","type":"String","value":"1","chainId":"_all_"},{"id":"zr_ans_rec","type":"String","value":"gbrank","chainId":"_all_"},{"id":"ios_ge4","type":"String","value":"3"},{"id":"ios_webp","type":"String","value":"1"},{"id":"se_refactored_search_index","type":"String","value":"0","chainId":"_all_"},{"id":"top_lowup","type":"String","value":"1","chainId":"_all_"},{"id":"adr_mqtt","type":"String","value":"0"},{"id":"adr_perm","type":"String","value":"0"},{"id":"adr_video_topic_volume_control","type":"String","value":"1"},{"id":"hb_stream_render","type":"String","value":"0"},{"id":"top_recall_core_interest","type":"String","value":"81","chainId":"_all_"},{"id":"top_videos_priority","type":"String","value":"-1","chainId":"_all_"},{"id":"adr_guest_login","type":"String","value":"0"},{"id":"adr_refresh_token","type":"String","value":"1"},{"id":"top_rerank_weight","type":"String","value":"-1","chainId":"_all_"},{"id":"ios_adr_vid_vol","type":"String","value":"1"},{"id":"ios_pdf","type":"String","value":"n"},{"id":"top_memberfree","type":"String","value":"1","chainId":"_all_"},{"id":"ios_vm_subject_type","type":"String","value":"0"},{"id":"top_root_few_topic","type":"String","value":"0","chainId":"_all_"},{"id":"tp_write_pin_guide","type":"String","value":"3","chainId":"_all_"},{"id":"web_card_style","type":"String","value":"b"},{"id":"adr_mbv","type":"String","value":"true"},{"id":"ios_wxfb","type":"String","value":"0"},{"id":"se_entity","type":"String","value":"on","chainId":"_all_"},{"id":"ios_answer_preload","type":"String","value":"0"},{"id":"top_ab_validate","type":"String","value":"1","chainId":"_all_"},{"id":"top_fqa","type":"String","value":"0","chainId":"_all_"},{"id":"top_vds_alb_pos","type":"String","value":"0","chainId":"_all_"},{"id":"hb_new_label","type":"String","value":"0"},{"id":"ios_vid_qt","type":"String","value":"1"},{"id":"top_feedre","type":"String","value":"1","chainId":"_all_"},{"id":"ios_article_new_comment","type":"String","value":"1"},{"id":"ios_le_nav","type":"String","value":"0"},{"id":"ios_video_continuous","type":"String","value":"1"},{"id":"top_spec_promo","type":"String","value":"1","chainId":"_all_"},{"id":"hb_active_answerer","type":"String","value":"0"},{"id":"ios_video_agent_4_28","type":"String","value":"false"},{"id":"top_adpar","type":"String","value":"0","chainId":"_all_"},{"id":"tp_discussion_feed_card_type","type":"String","value":"2","chainId":"_all_"}],"chains":[{"chainId":"_all_"}]},"triggers":{}},"userAgent":{"Edge":false,"Wechat":false,"Weibo":false,"QQ":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"isWebView":false,"origin":"Mozilla\u002F5.0 (Windows NT 6.1; WOW64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F55.0.2883.87 Safari\u002F537.36"},"trafficSource":"production","edition":{"baidu":false,"sogou":false,"baiduBeijing":false,"yidianzixun":false},"theme":"light","referer":"https:\u002F\u002Fwww.zhihu.com\u002Fcollection\u002F240356264","conf":{},"ipInfo":{"cityName":"Hefei","countryName":"China","regionName":"Anhui","countryCode":"CN"},"logged":true,"tdkInfo":{}},"me":{"accountInfoLoadStatus":{},"organizationProfileStatus":{},"columnContributions":[]},"label":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"active":{"sendDigitsError":null,"activeConfirmSucceeded":null,"activeConfirmError":null},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"recommendation":{},"shareTexts":{},"articles":{"voters":{}},"previewPost":{},"favlists":{"relations":{}},"columns":{"voters":{}},"reward":{"answer":{},"article":{},"question":{}},"video":{"data":{}},"topstory":{"topstorys":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]}},"readStatus":{},"column":{},"articleContribution":{"contributeRequests":[],"deleteContributeIdList":[],"handledContributeIdList":[],"recommendedColumns":[],"pinnedColumns":[],"sentContributeRequestsIdList":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"codehole","beautifuljava","hinus"]},"columnContribution":{"autoInviteEnabled":false,"recommendedContributors":[],"contributionInvitation":null}},"fetchHost":"www.zhihu.com","subAppName":"column"}</script><script src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/vendor.7c9abc3e398528f8abf1.js"></script><script src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/column.app.6d5cf7faaa690c9a410b.js"></script><script></script><div><div style="display: none;">想来知乎工作？请发送邮件到 jobs@zhihu.com</div></div><div><div><div class="Editable-languageSuggestions" style="left: -1179px; top: -999px;"><div><div class="Popover"><div class="Editable-languageSuggestionsInput Input-wrapper"><input autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplete17-0" id="Popover16-toggle" aria-haspopup="true" aria-owns="Popover16-content" class="Input" placeholder="选择语言" value=""><div class="Input-after"><svg class="Zi Zi--Select" fill="#afbdcf" viewBox="0 0 24 24" width="24" height="24"><path d="M12 16.183l2.716-2.966a.757.757 0 0 1 1.064.001.738.738 0 0 1 0 1.052l-3.247 3.512a.758.758 0 0 1-1.064 0L8.22 14.27a.738.738 0 0 1 0-1.052.758.758 0 0 1 1.063 0L12 16.183zm0-9.365L9.284 9.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l3.248-3.512a.758.758 0 0 1 1.065 0L15.78 8.73a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063.001L12 6.818z" fill-rule="evenodd"></path></svg></div></div></div></div></div></div></div><script src="./老大难的 Java ClassLoader 再不理解就老了 - 知乎_files/zap.js"></script></body></html>